<!DOCTYPE html>
<html lang="en-GB">
 <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KVPZS5DW');</script>
    <!-- End Google Tag Manager -->
    <meta charset="utf-8" />
    <title>Video Game</title>                            <!--Page title, invisible on browser page-->
    <link rel="stylesheet" href="styles.css" />                 <!--Reference to external CSS file-->
 </head>

 <body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KVPZS5DW"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <header>                                                 <!--Page title, visible on browser page-->
   <h1>
    <div class = "Line">                                    
     <div class = "HeadCell1">Video Game</div> 
     <div class = "HeadCell2"><img src = "Banner.gif"; title = "Chicken Crossing logo banner"/></div>
    </div>
   </h1>                                     
  </header>

  <p>This game's resolution is 1024 x 576, with the 16:9 aspect ratio typically used for
     Youtube videos. Handy if you wish to record the gameplay.<br>
     Keyboard scrolling is disabled on this page, for obvious reasons.
  </p>

  <div class = "Stage">
   <canvas id = "canvas"></canvas>
  </div>

  <p><strong><u>Context</u></strong><br>
    On a farm one day, a farmer is preparing to cull his older livestock. He mistakenly leaves the 
    gate to the chicken coop open whilst he tends to an urgent matter. Seizing the opportunity, one
    rooster darts out. Noticing the escape attempt, the farmer charges for the lone rooster
    in a spontaneous impulse, forgetting to close the coop gate to prevent the others from
    escaping too.<br>
    Why the error in judgment you ask? The short answer is spite. The long answer is that the
    rooster had a turbulent history with the farmer, frequently pecking and biting his fingers 
    and beating him with his wings whilst he came to dispense the grain feed.<br>
    Through his zealous vendetta against the rooster, the farmer was adamant to prevent him from
    fleeing with his life, even at the expense of losing a few hens in the process.<br>
    How will the story play out? The good news is that the outcome is in your hands!
    <br><br>
     <strong><u>Controls:</u></strong><br><br>
     <strong>Left</strong> and <strong>Right</strong> arrow keys for sideways motion<br>
     <strong>Spacebar</strong> to jump<br>
     <strong>Up</strong> arrow key when airborne to flap to gain altitude<br>
     <strong>P</strong> to pause<br><br>
     Enjoy the Game
  </p>

  <p><strong><u>Notice</u></strong><br>
     This game used to have three different endings, although that was before I added details 
     such as animation sequences, multi-layer backgrounds and annotations to the levels. I
     significantly underestimated the labour intensity of doing all those things, therefore that,
     combined with my complete makeover of the desert level from the ground up, meant that I
     had to restrict this version of the game to one ending, although it has been extended by a
     level. There are numerous improvements that I wish to make to the alternative plots as well,
     and I don't believe that they are ready to share in their current state, therefore I saw no
     point in reconfiguring their algorithms to make them compatible with the updated game.
  </p>

 </body>

 <script>

  var gravity = 0.6; var friction = 0.7;

  // Below, the image files are referenced and uploaded
  var Background 
  function BackgroundLoad() {
    if (Level == 1) 
      {Background = [new Image(), new Image(), new Image(), new Image()]; 
       Background[0].src = "BackgroundL1-0.jpg"; Background[1].src = "BackgroundL1-1.gif";
       Background[2].src = "BackgroundL1-2.gif"; Background[3].src = "BackgroundL1-3.gif" };
    if (Level == 2)
      {Background = [new Image(), new Image(), new Image(), new Image()];
       Background[0].src = "BackgroundL1-0.jpg"; Background[1].src = "BackgroundL2-0.gif";
       Background[2].src = "BackgroundL2-1.gif"; Background[3].src = "BackgroundL2-2.jpg" }
    if (Level == 3)
      {Background = [new Image(), new Image(), new Image(), new Image()];
       Background[0].src = "BackgroundL3-0.jpg"; Background[1].src = "BackgroundL3-1.gif";
       Background[2].src = "BackgroundL3-2.gif"                                           }
    if (Level == 4)
      {Background = [new Image(), new Image(), new Image(), new Image(), new Image()];
       Background[0].src = "BackgroundL4-0.jpg"; Background[1].src = "BackgroundSun.gif";
       Background[2].src = "BackgroundL4-1.jpg"; Background[3].src = "BackgroundL4-2.jpg";
       Background[4].src = "BackgroundL4-3.gif"                                           }
    if (Level == 7)
      {Background = [new Image(), new Image(), new Image()]; 
       Background[0].src = "BackgroundL7-0.jpg"; Background[1].src = "BackgroundL7-1.gif";
       Background[2].src = "BackgroundL7-2.gif"                                           }   
                            };

  const X_b1 = [0, -1976, -10, -10]; const Y_b1 = [0, 0, -50, 160]; 
  const X_bw1 = [1024, 3000, 2100, 3200]; const Y_bw1 = [576, 576, 576, 426];

  const X_b2 = [0, -4976, -10, -10]; const Y_b2 = [0, 0, 10, 40];
  const X_bw2 = [1024, 6000, 2100, 1750]; const Y_bw2 = [576, 576, 576, 1250];

  const X_b3 = [-38, -10, -10]; const Y_b3 = [-1420, -50, 20];
  const X_bw3 = [1100, 2100, 3200]; const Y_bw3 = [2000, 576, 576];

  const X_b4 = [0, 800, -10, -10, -10]; const Y_b4 = [-4424, 50, -124, 360, -120];
  const X_bw4 = [1024, 125, 5000, 5000, 3000]; const Y_bw4 = [5000, 125, 700, 219, 700];

  const X_b7 = [0, -10, -10]; const Y_b7 = [0, 0, 0];
  const X_bw7 = [1024, 2000, 4000]; const Y_bw7 = [576, 576, 576];

  var x_b = JSON.parse(JSON.stringify(X_b4)); var y_b = JSON.parse(JSON.stringify(Y_b4));

  var Foreground; 
  function ForegroundLoad() {
    if (Level == 4) 
      {Foreground = [new Image(), new Image(), new Image(), new Image()]; 
       Foreground[0].src = "ForegroundL4.gif"; Foreground[1].src = "BackgroundL2-0.gif";
       if (SceneL4 == 23 || SceneL4 == 24) {Foreground[2].src = "HQ_Ext1.jpg";
         if (Number(String(Temp)[0]) % 2 != 0) 
         {Foreground[3].src = "HQ_Ext1.jpg"} else {Foreground[3].src = "HQ_Ext2.jpg"}
                                           }  
       if (SceneL4 >= 25) {Foreground[2].src = "HQ_Tent1.jpg";
         if (Number(String(Temp)[0]) % 2 != 0) 
         {Foreground[3].src = "HQ_Tent1.jpg"} else {Foreground[3].src = "HQ_Tent2.jpg"}
                          }                                                      
      }
                            };

  const X_f4 = [0, -1976, 0, 0]; const Y_f4 = [-174, -1000, 0, 0];
  const X_fw4 = [1024, 6000, 1024, 1024]; const Y_fw4 = [100, 576, 576, 576];  
  
  var x_f = JSON.parse(JSON.stringify(X_f4)); var y_f = JSON.parse(JSON.stringify(Y_f4));

  // Function to render the canvas
  function RenderCanvas() {let B = Background.length;
    for (let b = 0; b < B; b++) {
      if (Level == 1) {ctx.drawImage(Background[b], x_b[b], y_b[b], X_bw1[b], Y_bw1[b])}
      if (Level == 2) {ctx.drawImage(Background[b], x_b[b], y_b[b], X_bw2[b], Y_bw2[b])}
      if (Level == 3) {ctx.drawImage(Background[b], x_b[b], y_b[b], X_bw3[b], Y_bw3[b])}
      if (Level == 4) {
        if (b != 2) {ctx.drawImage(Background[b], x_b[b], y_b[b], X_bw4[b], Y_bw4[b])}
        else {
          if (Player.x < Map[2][1].x) {ctx.drawImage(Background[b], x_b[b], y_b[b], X_bw4[b], Y_bw4[b])}
          else {ctx.globalAlpha = (1 - ((Player.x - Map[2][1].x) / 50000));
                ctx.drawImage(Background[b], x_b[b], y_b[b], X_bw4[b], Y_bw4[b]); 
                ctx.globalAlpha = 1                                              }
             }        }
      if (Level == 7) {ctx.drawImage(Background[b], x_b[b], y_b[b], X_bw7[b], Y_bw7[b])}                
                                }                                          
                          };

  // Function to render the foreground
  function RenderFore() {let F = Foreground.length;
    for (let f = 0; f < F; f++) {
      if (Level == 4) {ctx.drawImage(Foreground[f], x_f[f], y_f[f], X_fw4[f], Y_fw4[f])
        if (SceneL4 >= 8) {ctx.drawImage(Glider, Gx, Player.y, 162, 104)}}
                                }
                        };                        

  var Chicken = new Image(); Chicken.src = "ChickenR1.gif"; // Our beloved protagonist <:-)
  var DuckImage = []; var PigeonImage = []; var AppImage = [];
  var Farmer = new Image(); // Our accursed nemesis >:-(
  var Hills = []; var PlatformImage = []; var BlockImage = []; 

  // A separate render is made for each instance of the map characters
  function ImageLoad() {
    if (Level == 1) {DuckImage = [new Image(), new Image(), new Image()]; 
      PigeonImage = [new Image(), new Image(), new Image()]; 
      AppImage = [new Image(), new Image(), new Image(), new Image(), new Image(), 
                  new Image(), new Image()                                        ]; 
      AppImage[0].src = "DrainL1.gif"; AppImage[1].src = "AppRight.gif"; 
      AppImage[2].src = "AppRight.gif"; AppImage[3].src = "AppUpRight.gif";
      AppImage[4].src = "AppDown.gif"; AppImage[5].src = "AppUp.gif";
      AppImage[6].src = "HTP.gif"
                    };
    if (Level == 2) {DuckImage = [new Image(), new Image()]; 
      DuckImage[0].src = "RatR.gif"; DuckImage[1].src = "FishR.gif";
      PigeonImage = [new Image(), new Image()]; 
      PigeonImage[0].src = "Bat1.gif"; PigeonImage[1].src = "Bat1.gif";
      AppImage = [new Image(), new Image(), new Image(), new Image(), new Image(), new Image(),
                  new Image(), new Image(), new Image(), new Image()                           ]; 
      AppImage[0].src = "Drain.gif"; AppImage[1].src = "Drain.gif"; AppImage[2].src = "Portal.jpg";
      AppImage[3].src = "AppRight.gif"; AppImage[4].src = "AppRight.gif"; 
      AppImage[5].src = "AppUp.gif"; AppImage[6].src = "AppUpGlitch.gif"; 
      AppImage[7].src = "AppUpRight.gif"; AppImage[8].src = "Stamina.gif"; 
      AppImage[9].src = "AppUpRight.gif"
                    };
    if (Level == 3) {DuckImage = []; PigeonImage = []; AppImage = [];
      PlatformImage = [new Image(), new Image()]; 
      PlatformImage[0].src = "Lift-Off.gif"; PlatformImage[1].src = "Lift-Off.gif";
      BlockImage = new Image; BlockImage.src = "ObstacleL3.gif";
                    };
    if (Level == 4) {DuckImage = [new Image(), new Image(), new Image(), new Image(), new Image(), 
                                  new Image(), new Image(), new Image(), new Image(), new Image(),
                                  new Image()                                                     ]; 
      for (let d = 0; d < 11; d++) {DuckImage[d].src = "Boost.gif"}; 
      PigeonImage = [new Image(), new Image()]; 
      for (let a = 0; a < 128; a++) {AppImage[a] = new Image(); AppImage[a].src = "PalmTree.gif"}; 
      AppImage[1].src = "HTP4.gif"; AppImage[127].src = "TruckFLA2.gif"
                    };
    if (Level == 5) {
      for (let c = 0; c < 9; c++) {DuckImage[c] = new Image(); DuckImage[c].src = "ChickenNPC.gif"};
      PigeonImage = []; AppImage = []
                    };
    if (Level == 6) {DuckImage = [new Image(), new Image()]; 
      DuckImage[0].src = "Boost.gif"; DuckImage[1].src = "Boost.gif";
      PigeonImage = [new Image(), new Image(), new Image()]; 
      PigeonImage[0].src = "Boost.gif"; PigeonImage[1].src = "Boost.gif"; 
      PigeonImage[2].src = "Boost.gif";
      AppImage = new Image(); AppImage.src = "Bike.gif";
      Hills = new Image(); Hills.src = "HillsL6.gif";
      PlatformImage = new Image(); PlatformImage.src = "Platform.gif";
      BlockImage = new Image; BlockImage.src = "Block.gif";
                    };
    if (Level == 7) {AppImage = [new Image(), new Image(), new Image(), new Image(),
                                 new Image(), new Image(), new Image(), new Image(), 
                                 new Image(), new Image(), new Image(), new Image() ]; 
      AppImage[0].src = "AppRight.gif"; AppImage[1].src = "7years.gif";
      AppImage[2].src = "Lamppost1.gif"; AppImage[3].src = "Bar1.jpg";
      AppImage[4].src = "Lamppost1.gif"; AppImage[5].src = "Lamppost1.gif";
      AppImage[6].src = "24hours.gif"; AppImage[7].src = "Superstore.jpg";
      AppImage[8].src = "Lamppost1.gif"; AppImage[9].src = "Lamppost1.gif";
      AppImage[10].src = "Lamppost1.gif"; AppImage[11].src = "Salon1.jpg";
                    }              
                       };

  // Function to render the player
  function RenderPlayer() {
    if (Level != 4) {ctx.drawImage(Chicken, Player.x, Player.y, Player.width, Player.height)}
    else {ctx.translate(Player.x+Player.width/2, Player.y+Player.height/2);
      ctx.rotate(Player.y_v*Math.PI/2/(Player.x_v + Math.abs(Player.y_v)));
      ctx.drawImage(Chicken, -Player.width/2, -Player.height/2, Player.width, Player.height);
      ctx.rotate(-Player.y_v*Math.PI/2/(Player.x_v + Math.abs(Player.y_v)));
      ctx.translate(-Player.x-Player.width/2, -Player.y-Player.height/2)
         }                };
  // Note: +x is right, +y is down for all coordinates
  
  var Level = 1; // The number specifies the map to be loaded

  // These arrays will be filled in accordance with the level specifications
  var Spawn; var Ground = []; var Platform = []; var Obstacle = []; var Duck = []; var Pigeon = []; 
  var Water = []; var Apparition = []; var Predator = []; var MapSpec = [];

  function LevelLoad() {// Where the fun of level-building happens! >:-D
    if (Level == 1) {Spawn = {x: 30, y: 200};
      Water[0] = {x: 3800, y: -4000, width: 100, height: 4556};

      Ground[0] = {x: 0, y: 556, width: 2050, height: 40};
      Ground[1] = {x: 2300, y: 556, width: 1700, height: 40};
        
      Platform[0] = {x: 500, y: 200, width: 110, height: 15};
      Platform[1] = {x: 800, y: 230, width: 110, height: 15};
      Platform[2] = {x: 1200, y: 30, width: 110, height: 15};
      Platform[3] = {x: 1550, y: 406, width: 350, height: 15};
      Platform[4] = {x: 1600, y: 511, width: 350, height: 15};

      Obstacle[0] = {x: 300, y: 456, width: 50, height: 100};
      Obstacle[1] = {x: 650, y: 406, width: 50, height: 150};
      Obstacle[2] = {x: 1500, y: 406, width: 50, height: 150};
      Obstacle[3] = {x: 1500, y: -124, width: 500, height: 500};
      Obstacle[4] = {x: 1950, y: 376, width: 50, height: 150};
      Obstacle[5] = {x: 2500, y: 300, width: 50, height: 50};
      Obstacle[6] = {x: 2500, y: 400, width: 50, height: 50};
      Obstacle[7] = {x: 2500, y: 500, width: 50, height: 50};
      Obstacle[8] = {x: 2700, y: 400, width: 200, height: 156};
      Obstacle[9] = {x: 3900, y: -4000, width: 1000, height: 4556};
  
      Duck[0] = {x: 1300, y: 526, x_v: -1, width: 20, height: 20};
      Duck[1] = {x: 1750, y: 375, x_v: 1, width: 20, height: 20};
      Duck[2] = {x: 3000, y: 300, x_v: -1, width: 100, height: 100};

      Pigeon[0] = {x: 1000, y: 0, y_v: 1, width: 20, height: 20};
      Pigeon[1] = {x: 2100, y: -100, y_v: 1, width: 20, height: 20};
      Pigeon[2] = {x: 2400, y: 275, y_v: 1, width: 50, height: 50};

      Apparition[0] = {x: 3500, y: 526, width: 100, height: 50};
      Apparition[1] = {x: 30, y: 400, width: 100, height: 50};
      Apparition[2] = {x: 1350, y: 356, width: 100, height: 50};
      Apparition[3] = {x: 1350, y: 50, width: 100, height: 100};
      Apparition[4] = {x: 3525, y: 326, width: 50, height: 100};
      Apparition[5] = {x: 3825, y: 100, width: 50, height: 100};
      Apparition[6] = {x: 0, y: 0, width: 1024, height: 576};

      Predator[0] = {x: -1000, y: 10, x_v: 2.25, width: 550, height: 550};
      Predator[1] = {x: -875, y: 20, x_v: 2.25, width: 225, height: 250};

      MapSpec = [Spawn, Water, Ground, Platform, Obstacle, Duck, Pigeon, Apparition, Predator]
                    };

    if (Level == 2) {Spawn = []; Spawn = {x: 35, y: 42};
      Water = [];
      Water[0] = {x: 1100, y: 750, width: 1500, height: 150};
      Water[1] = {x: 295, y: -100, width: 100, height: 140};

      Ground = [];
      Ground[0] = {x: 0, y: 1060, width: 0, height: 0};
      Ground[1] = {x: 0, y: 40, width: 10, height: 40};
      Ground[2] = {x: 80, y: 40, width: 2600, height: 40};
      Ground[3] = {x: 80, y: 40, width: 2600, height: 40};
      Ground[4] = {x: 3020, y: 40, width: 80, height: 40};
    
      Platform = [];
      Platform[0] = {x: 1500, y: 735, width: 110, height: 15};
      Platform[1] = {x: 2700, y: 500, width: 50, height: 15};
      Platform[2] = {x: 2950, y: 300, width: 50, height: 15};
    
      Obstacle = [];
      Obstacle[0] = {x: 0, y: 80, width: 10, height: 1020};
      Obstacle[1] = {x: 80, y: 80, width: 120, height: 930};
      Obstacle[2] = {x: 10, y: 1040, width: 1090, height: 60};
      Obstacle[3] = {x: 300, y: 840, width: 100, height: 200};
      Obstacle[4] = {x: 500, y: 690, width: 100, height: 350};
      Obstacle[5] = {x: 1000, y: 690, width: 100, height: 350};
      Obstacle[6] = {x: 160, y: 80, width: 2520, height: 420};
      Obstacle[7] = {x: 1100, y: 900, width: 1500, height: 200};
      Obstacle[8] = {x: 2600, y: 690, width: 400, height: 410};
      Obstacle[9] = {x: 3020, y: 80, width: 80, height: 1020};
      Obstacle[10] = {x: 2700, y: 40, width: 300, height: 10};
      Obstacle[11] = {x: 10, y: 40, width: 20, height: 1000};
      Obstacle[12] = {x: 60, y: 40, width: 20, height: 970};
      Obstacle[13] = {x: 2680, y: 40, width: 20, height: 460};
      Obstacle[14] = {x: 3000, y: 40, width: 20, height: 1060};
      Obstacle[15] = {x: 395, y: -100, width: 1000, height: 140};
      Obstacle[16] = {x: 10, y: 30, width: 60, height: 10};

      Duck = [];
      Duck[0] = {x: 900, y: 1000, x_v: -1, width: 20, height: 20};
      Duck[1] = {x: 2000, y: 750, x_v: -1, width: 600, height: 150};

      Pigeon = [];
      Pigeon[0] = {x: 750, y: 700, y_v: 1, width: 50, height: 50};
      Pigeon[1] = {x: 1300, y: 500, y_v: 1, width: 100, height: 100};

      Apparition = [];
      Apparition[0] = {x: -5, y: 15, width: 100, height: 50};
      Apparition[1] = {x: 2700, y: 40, width: 300, height: 40};
      Apparition[2] = {x: 2300, y: -160, width: 100, height: 200};
      Apparition[3] = {x: 750, y: 550, width: 100, height: 50};
      Apparition[4] = {x: 1700, y: 650, width: 100, height: 50};
      Apparition[5] = {x: 2825, y: 550, width: 50, height: 100};
      Apparition[6] = {x: 1325, y: 500, width: 50, height: 100};
      Apparition[7] = {x: 1450, y: 200, width: 100, height: 100};
      Apparition[8] = {x: 200, y: 900, width: 100, height: 50};
      Apparition[9] = {x: 1700, y: 50, width: 100, height: 100};

      MapSpec = [];
      MapSpec = [Spawn, Water, Ground, Platform, Obstacle, Duck, Pigeon, Apparition]
                    }; 
                    
    if (Level == 3) {Spawn = []; Spawn = {x: 150, y: 400};
      Water = []; Water[0] = {x: 500, y: 10, width: 10, height: 10};
      
      Ground = []; Ground[0] = {x: 0, y: 556, width: 3000, height: 40};

      Platform = [];
      Platform[0] = {x: 50, y: 400, y_v: 0, width: 50, height: 50};
      Platform[1] = {x: 2900, y: 400, y_v: 0, width: 50, height: 50};

      Obstacle = [];
      Obstacle[0] = {x: 300, y: -800, width: 1100, height: 1200};
      Obstacle[1] = {x: 1600, y: -800, width: 1100, height: 1200};

      Predator = []; Predator[0] = {x: 1000, y: 100, width: 50, height: 50};

      MapSpec = [];
      MapSpec = [Spawn, Water, Ground, Platform, Obstacle, Predator]
                    };
                    
    if (Level == 4) {Spawn = []; Spawn = {x: 30, y: 450};
      Water = [];
      Water[0] = {x: 1000, y: 556, width: 100000, height: 500};

      Ground = [];
      Ground[0] = {x: 0, y: 556, width: 1000, height: 500};
      Ground[1] = {x: 101000, y: 556, width: 50000, height: 500};
        
      Platform = [];

      Obstacle = [];
  
      Duck = [];
      Duck[0] = {x: 200, y: 456, x_v: 1, width: 100, height: 100};
      Duck[1] = {x: 1500, y: 250, x_v: 1, width: 100, height: 100};
      Duck[2] = {x: 3000, y: 100, x_v: 1, width: 100, height: 100};
      Duck[3] = {x: 15000, y: 400, x_v: 1, width: 100, height: 100};
      Duck[4] = {x: 20000, y: 400, x_v: 1, width: 100, height: 100};
      Duck[5] = {x: 30000, y: 400, x_v: 1, width: 100, height: 100};
      Duck[6] = {x: 40000, y: 400, x_v: 1, width: 100, height: 100};
      Duck[7] = {x: 50000, y: 400, x_v: 1, width: 100, height: 100};
      Duck[8] = {x: 60000, y: 400, x_v: 1, width: 100, height: 100};
      Duck[9] = {x: 70000, y: 400, x_v: 1, width: 100, height: 100};
      Duck[10] = {x: 80000, y: 400, x_v: 1, width: 100, height: 100};

      Pigeon = [];
      Pigeon[0] = {x: 850, y: 300, y_v: -1, width: 100, height: 100};
      Pigeon[1] = {x: 4000, y: -200, y_v: 1, width: 100, height: 100};

      Apparition = []; 
      Apparition[0] = {x: -1000, y: 436, width: 100, height: 260, mode: 0, y_v: 0};
      Apparition[1] = {x: 200, y: 100, width: 714, height: 422};
      for (let a = 2; a < 127; a++) {
        Apparition[a] = {x: 101005 + 400*(a-2), y: 156, width: 390, height: 400}}
      Apparition[127] = {x: 151000, y: 331, width: 500, height: 225};  

      Predator = []; Predator[0] = {x: -3000, y: 10, x_v: 30, width: 200, height: 180};

      MapSpec = [];
      MapSpec = [Spawn, Water, Ground, Platform, Obstacle, Duck, Pigeon, Apparition, Predator]
                    };
                    
    if (Level == 5) {Spawn = []; Spawn = {x: 30, y: 200};
      Ground = []; Ground[0] = {x: 0, y: 556, width: 10000, height: 40};

      Duck = []; for (let d = 0; d < 9; d++)
        {Duck[d] = {x: 1000 + 1500*d, y: 500, x_v: 1, width: 50, height: 50}};
  
      MapSpec = [];
      MapSpec = [Spawn, Ground, Duck]
                    };
                    
    if (Level == 6) {Spawn = {x: 30, y: 200};
      Water[0] = {x: -10, y: 200, width: 5000, height: 400}; // Background hills

      Ground[0] = {x: 0, y: 556, width: 3000, height: 40};
      Ground[1] = {x: 4000, y: 556, width: 6000, height: 40};
        
      Platform[0] = {x: 2000, y: 200, width: 1000, height: 100};
      Platform[1] = {x: 5000, y: 200, width: 1000, height: 100};

      Obstacle[0] = {x: 1000, y: 356, width: 100, height: 200};
      Obstacle[1] = {x: 1700, y: 356, width: 100, height: 200};
      Obstacle[2] = {x: 4500, y: 106, width: 100, height: 200};
      Obstacle[3] = {x: 4500, y: 356, width: 100, height: 200};
      Obstacle[4] = {x: 7000, y: 356, width: 100, height: 200};
      Obstacle[5] = {x: 7600, y: 356, width: 100, height: 200};
  
      Duck[0] = {x: 2800, y: 100, width: 100, height: 100};
      Duck[1] = {x: 5800, y: 100, width: 100, height: 100};

      Pigeon[0] = {x: 500, y: 200, y_v: 1, width: 100, height: 100};
      Pigeon[1] = {x: 6500, y: 200, y_v: 1, width: 100, height: 100};
      Pigeon[2] = {x: 8000, y: 200, y_v: 1, width: 100, height: 100};

      Apparition = [];
      Apparition[0] = {x: 9700, y: 506, width: 200, height: 50};

      Predator = [];
      Predator[0] = {x: -1000, y: 10, x_v: 5, width: 550, height: 550};

      MapSpec = [Spawn, Water, Ground, Platform, Obstacle, Duck, Pigeon, Apparition, Predator]
                    };

    if (Level == 7) {Spawn = []; Spawn = {x: 50, y: 400};
      Water = []; Water[0] = {x: 500, y: 10, width: 10, height: 10};
      
      Ground = []; Ground[0] = {x: 0, y: 556, width: 8000, height: 40}; 
      
      Apparition = [];
      Apparition[0] = {x: 280, y: 395, width: 100, height: 50};
      Apparition[1] = {x: 50, y: 406, width: 200, height: 30};
      Apparition[2] = {x: 600, y: 156, width: 200, height: 400};
      Apparition[3] = {x: 1000, y: 356, width: 300, height: 200};
      Apparition[4] = {x: 2000, y: 156, width: 200, height: 400};
      Apparition[5] = {x: 2500, y: 156, width: 200, height: 400};
      Apparition[6] = {x: 3000, y: 156, width: 200, height: 400};
      Apparition[7] = {x: 3500, y: 256, width: 500, height: 300};
      Apparition[8] = {x: 5200, y: 156, width: 200, height: 400};
      Apparition[9] = {x: 5800, y: 156, width: 200, height: 400};
      Apparition[10] = {x: 6300, y: 156, width: 200, height: 400};
      Apparition[11] = {x: 7200, y: 356, width: 200, height: 200};

      Predator = []; Predator[0] = {x: -1000, y: 10, width: 550, height: 550};

      MapSpec = [Spawn, Water, Ground, Apparition, Predator]
                    };
                
                    // Gotta call it from the beginning, otherwise Level 1 won't load
                       }; LevelLoad(); 

  // The map may need to be reset and reloaded
  var Map = JSON.parse(JSON.stringify(MapSpec));
  /* A simple "=" assignment alone means that any changes to the copy will also carry over to
     the original, something that should be avoided */

  const Player = {x: Map[0].x, y: Map[0].y, x_v: 0, y_v: 0, jump: true, bounce: false,
                  height: 20, width: 20, Stamina: 5, Lives: 5, Surprised: false, Active: true};  
  
  const keys = {right: false, left: false, up: false, down: false, // Arrow key status
                pause: false, jump: false}; 
 
  // Function to render the map
  function RenderMap() {let I = Map.length;
    for (let i = 1; i < I; i++) {let J = Map[i].length
      for (let j = 0; j < J; j++) {
      if (i == 1) {ctx.fillStyle = "darkcyan"; 
        if (Level == 2 && j == 0) {ctx.fillStyle = "darkslategrey"};
        if (Level == 3) {ctx.fillStyle = "orangered"};
        if (Level == 4) {ctx.fillStyle = HexT};
        if (Level == 5) {ctx.fillStyle = "#ffeb99"};
        if (Level == 6) 
          {ctx.drawImage(Hills, Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}}; 
      if (i == 2) {if (Level == 1 || Level == 2) {ctx.fillStyle = "green"}
        if (Level == 4) {ctx.fillStyle = "goldenrod"}
        if (Level == 5) 
          {ctx.drawImage(DuckImage[j], Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}
        if (Level == 6) {ctx.fillStyle = "deeppink"}
        if (Level == 7) {ctx.fillStyle = "white"}
                  };
      if (i == 3) {ctx.fillStyle = "brown";
        if (Level == 3) 
          {ctx.drawImage(PlatformImage[j], Map[i][j].x, Map[i][j].y, 
            Map[i][j].width, Map[i][j].height)}
        if (Level == 6) 
          {ctx.drawImage(PlatformImage, Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}
        if (Level == 7) 
          {ctx.drawImage(AppImage[j], Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}
                  }
      if (i == 4) {ctx.fillStyle = "yellow"; 
        if (Level == 2) {ctx.fillStyle = "purple"; if (j == 15) {ctx.fillStyle = "yellow"}};
        if (Level == 3 || Level == 6) 
          {ctx.drawImage(BlockImage, Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)};
        if (Level == 7) 
          {ctx.drawImage(Farmer, Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}};
      if (i == 5) 
        {if (Level != 3) 
          {ctx.drawImage(DuckImage[j], Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}
          else
          {ctx.drawImage(Farmer, Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}};
      if (i == 6) 
        {ctx.drawImage(PigeonImage[j], Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)};
      if (i == 7) {if (Level == 1 || Level == 4 || Level == 6) 
          {ctx.drawImage(AppImage[j], Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)};
          if (Level == 2) {
          {ctx.drawImage(AppImage[j], Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}}};
      if (i == 8) 
        {if (j == 0) 
          {ctx.drawImage(Farmer, Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}
         if (j == 1) 
          {ctx.drawImage(FH, Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}
        };
     
      if ((Level == 1 || Level == 2 || Level == 4) && 0 < i && i < 5) 
        {{ctx.fillRect(Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}};
      if (Level == 3 && i == 2) 
        {{ctx.fillRect(Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}};
      if (Level == 5 && i != 2) 
        {{ctx.fillRect(Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}};
      if ((Level == 6 || Level == 7) && i == 2) 
        {{ctx.fillRect(Map[i][j].x, Map[i][j].y, Map[i][j].width, Map[i][j].height)}};                                   
                                  }
                                }
                       };                             

  // This function will be called when a key on the keyboard is pressed
  function keydown(e) {if (Player.Active) {
  // 37 is the code for the left arrow key
  if(e.keyCode == 37) {keys.left = true};
  // 32 is the code for the spacebar
  if (e.keyCode == 32) {keys.jump = true;
    if (Player.jump == false && Block != "hit") 
      {if (Level != 7) {Player.y_v = -15} else {Player.y_v = -10}}  
                       };
  // 38 is the code for the up arrow key
  if(e.keyCode == 38) {keys.up = true};
  
  document.body.onkeyup = function(e) {if(e.keyCode == 38 && Player.jump) 
    // Flapping physics; each flap costs a stamina point (see chicken wing icon)
    {if (Player.Stamina > 0 && Block != "hit") 
      {if (Level != 4 && Level != 7) {Player.y_v = -10} 
       if (Level == 7) {Player.y_v = -3}; Player.Stamina--}}
                                      };

  // 39 is the code for the right arrow key
  if(e.keyCode == 39) {keys.right = true};
  // 40 is the code for the down arrow key
  if(e.keyCode == 40) {keys.down = true}  

  // 80 is the code for the 'P' letter key
  if(e.keyCode == 80) {if (keys.pause == false) {keys.pause = true} else {keys.pause = false}} 
                                          }
                      };
                    
  // Gotta replenish that stamina somehow, one point per five seconds seems fair
  if (Level != 4 && Level != 7) {setInterval(function () {if (Player.Stamina < 5 && keys.pause == false) 
       {Player.Stamina++}                                }, 5000)}
  // When the chicken is old, the stamina count is lower and takes twice as long to replenish
  if (Level == 7) {setInterval(function () {if (Player.Stamina < 3) 
    {if (Player.Active && keys.pause == false) {Player.Stamina++}}
                                           }, 10000)
                  };                                        

  // This function is called when the pressed key is released
  function keyup(e) {
  if (e.keyCode == 37) {keys.left = false};
  if (e.keyCode == 32) {keys.jump = false; if(Player.y_v < -2) {Player.y_v = -3}};
  if (e.keyCode == 38) {keys.up = false};
  if (e.keyCode == 39) {keys.right = false};
  if (e.keyCode == 40) {keys.down = false};
                    }; 

  var Scroll = [false, false]; // Level's too big to fit on-stage, therefore the map is scrolled
  
  function ScrollConditions() {// To scroll or not to scroll, that is the question...
    if (Level != 3 && Level != 5 && Level != 6) {if (Player.x - Map[2][0].x >= 512 &&
        Map[2][Map[2].length-1].x + Map[2][Map[2].length-1].width - Player.x >= 512) 
    {Scroll[0] = true} else {Scroll[0] = false} };
    if (Level == 3) {if (Player.x - Map[2][0].x >= 512 &&
        Map[2][0].x + Map[2][0].width - Player.x >= 512) 
    {Scroll[0] = true} else {Scroll[0] = false}};
    if (Level == 5) {if (Player.x - Map[1][0].x >= 512 &&
        Map[1][0].x + Map[1][0].width - Player.x >= 512) 
    {Scroll[0] = true} else {Scroll[0] = false}};
    if (Level == 6) {if (Player.x - Map[2][0].x >= 512 &&
        Map[2][1].x + Map[2][1].width - Player.x >= 520) {Scroll[0] = true} else {Scroll[0] = false}};
    if (Level == 1) {if (Map[2][0].y - Player.y > 526 && Player.y - Map[4][9].y > 40) 
      {Scroll[1] = true} else {Scroll[1] = false}}
    if (Level == 2) 
      {if (Map[2][0].y - Player.y > 526 && Map[2][0].y - Player.y < 1675) 
        {Scroll[1] = true} else {Scroll[1] = false}}
    if (Level == 4) 
      {if (Map[2][0].y - Player.y > 526 && Map[2][0].y - Player.y < 70000) 
        {Scroll[1] = true} else {Scroll[1] = false}                       }
    if (Level == 3) 
      {if (Map[2][0].y - Player.y > 526) {Scroll[1] = true} else {Scroll[1] = false}}
    if (Level == 5) 
      {if (Map[1][0].y - Player.y > 526) {Scroll[1] = true} else {Scroll[1] = false}}
    if (Level == 6) {if (Map[2][0].y - Player.y > 526) {Scroll[1] = true} else {Scroll[1] = false}}
    if (Level == 7) {Scroll[1] = false; if (Player.Stamina > 3) {Player.Stamina = 3}};
    if (Scroll[0] == false) {Player.x += Player.x_v};
    if (Scroll[1] == false) {Player.y += Player.y_v}
                              };

  // Horizontal collision check
  var Block = false;  
  function Collision() {let I = Map.length;
    for (let i = 1; i < I; i++) {let J = Map[i].length;                       
      for (let j = 0; j < J; j++) {
        if (Level == 3 && i == 3) {if (Map[i][j].y + Map[i][j].height < Map[2][0].y) 
                                   {Map[i][j].y_v = 5} else {Map[i][j].y_v = 0}     };

        // Player x coordinate lies between those of map element
        if (Map[i][j].x - Player.width < Player.x && Player.x < Map[i][j].x + Map[i][j].width) {                                               
        // Player lands on element
        if (Map[i][j].y - 10 < Player.y + Player.height && 
            Player.y + Player.height <= Map[i][j].y + 10) {
          if (Level == 4 && i == 1) {if (keys.up) {Player.y_v = -1}
            else {Player.y_v = 0; Player.y = Map[i][j].y - Player.height}
                                    }    
          if ((Level != 5 && Level != 7 && i >= 2 && i <= 4) || (Level == 7 && i == 2))     
            {Player.jump = false; Player.y_v = 0; Player.y = Map[i][j].y - Player.height;
             if (Level == 3 && i == 3) {if (Map[i][j].y > Map[4][0].y) {Map[i][j].y_v = -5}
              else {Map[i][j].y_v = 0}; Player.y_v = Map[i][j].y_v; 
                                       }                                                   };
          if ((Level == 3 || Level == 5) && i == 1) {Player.jump = false; Player.y_v = 0; 
            Player.y = Map[i][j].y - Player.height};
          // 'Player.bounce = true' prevents Player from getting frozen by same enemy it bounces off
          if (Level != 3 && Level != 4 && Level != 6 && (i == 5 || i == 6)) 
          {Player.bounce = true;
           if (Level == 2 && i == 5 && j == 1) {Player.bounce = false}; 
           if (Player.bounce) {Player.y_v = -15}                       }          
                                                          };
        // Player hits element from underneath
        if (i == 4 && Map[i][j].y + Map[i][j].height - 15 < Player.y && 
            Player.y < Map[i][j].y + Map[i][j].height - Player.y_v     ) {Player.y_v = 0};
        // Player y coordinate lies between those of map element  
        if (Map[i][j].y < Player.y + Player.height && Player.y < Map[i][j].y + Map[i][j].height) {
          if (Level != 7 && i == 4) {Player.x_v = 0; 
            if (Player.x < Map[i][j].x - Player.width + 5) {Player.x = Map[i][j].x - Player.width;
              if (Scroll[0] == true && Player.x < 507) {Block = "right"}}; 
            if (Player.x > Map[i][j].x+Map[i][j].width - 5) {Player.x = Map[i][j].x+Map[i][j].width;
              if (Scroll[0] == true && Player.x > 517) {Block = "left"}}};
          if (((Level!=3 && Level!=4 && Level!=6 && (i==5 || i==6)) || (Level==4 && i==6)) 
              && Player.bounce == false) {Player.x_v = 0; Block = "hit"};
          if (Level == 4 && i == 5) {Player.x_v += 1};
          if (Level == 6 && (i == 5 || i == 6)) {Player.x_v = 10};  
          if (Level != 4 && Level != 6 && i == 1 && keys.up) {Player.y_v = -10};                                      
          if (Level == 1 && i == 7 && keys.down)  
            { Level++; Map = []; LevelLoad(); 
              Map = JSON.parse(JSON.stringify(MapSpec)); // Level 1 --> 2 transition
              x_b = JSON.parse(JSON.stringify(X_b2)); y_b = JSON.parse(JSON.stringify(Y_b2)); 
              Player.x = Map[0].x; Player.y = Map[0].y; Player.Stamina = -2; Player.Surprised = false;
              ReverseT = 1000
            };              
          if (Level == 1 && Player.y < 0) {// Level 1 --> 4 transition
            Level = 4; LevelLoad(); Map = JSON.parse(JSON.stringify(MapSpec)); SceneL4 = 0;
            x_b = JSON.parse(JSON.stringify(X_b4)); y_b = JSON.parse(JSON.stringify(Y_b4)); 
            Player.x = Map[0].x; Player.y = Map[0].y; Player.Stamina = 0;
            Player.width = 162; Player.height = 104; ReverseT = 1000; 
            Chicken.src = "ChickenGlideR2.gif"
                                          };   
          if (Level == 2 && i == 7 && j == 8) {Player.Stamina = 5}; // Stamina replenishment          
          if (Level == 2 && i == 7 && j == 1 && keys.up) // Level 2 --> 3 transition
            { Water = []; Ground = []; Platform = []; Obstacle = []; Apparition = [];
              Level++; Map = []; LevelLoad(); 
              x_b = JSON.parse(JSON.stringify(X_b3)); y_b = JSON.parse(JSON.stringify(Y_b3));
              Map = JSON.parse(JSON.stringify(MapSpec)); Player.x = Map[0].x; Player.y = Map[0].y;
              Player.width = 100; Player.height = 100; 
              Player.Stamina = 5; T = [3, 0]
            };
          if (Level == 3 && T[0] == [0] && T[1] == [0]) // Level 3 --> 7 transition
            { Text = []; Water = []; Ground = []; Platform = []; Obstacle = []; Apparition = [];
              Level = 7; Map = []; LevelLoad(); 
              x_b = JSON.parse(JSON.stringify(X_b7)); y_b = JSON.parse(JSON.stringify(Y_b7));
              Map = JSON.parse(JSON.stringify(MapSpec)); Player.x = Map[0].x; Player.y = Map[0].y;
              Player.Lives = 0; Player.Stamina = 3; t = 0 
            };
          if (Level == 2 && i == 7 && j == 2 && keys.up) 
            { Water = []; Ground = []; Platform = []; Obstacle = []; Apparition = [];
              Level++; Map = []; LevelLoad(); // Level 2 --> 3 transition
              x_b = JSON.parse(JSON.stringify(X_b3)); y_b = JSON.parse(JSON.stringify(Y_b3));
              Map = JSON.parse(JSON.stringify(MapSpec)); Player.x = Map[0].x; Player.y = Map[0].y;
              Player.width = 100; Player.height = 100; 
              Player.Stamina = 5; T = [3, 0];
            };
         /* { Background[0].src = "BackgroundL6.jpg"; // Level 2 --> 6 transition
              Water = []; Ground = []; Platform = []; Obstacle = []; Apparition = [];
              Level = 6; Map = []; LevelLoad(); 
              x_b = JSON.parse(JSON.stringify(X_b1[5])); y_b = JSON.parse(JSON.stringify(Y_b1[5]));
              Map = JSON.parse(JSON.stringify(MapSpec)); Player.x = Map[0].x; Player.y = Map[0].y;
              Player.Stamina = 5; ReverseT = 1000   
            }; */
    /*  if (Level == 4 && Player.x - Map[1][0].x > 5900)  
             {Background[0].src = "BackgroundL5.jpg"; 
              Water = []; Ground = []; Platform = []; Obstacle = []; Apparition = []; Predator = [];
              Level++; Map = []; LevelLoad(); 
              Map = JSON.parse(JSON.stringify(MapSpec)); // Level 4 --> 5 transition
              x_b = JSON.parse(JSON.stringify(X_b1[4])); y_b = JSON.parse(JSON.stringify(Y_b1[4])); 
              Player.x = Map[0].x; Player.y = Map[0].y; Player.Stamina = 5;
              Player.Surprised = false
             }; */
          if (Level == 6 && Map[7][0].x < Player.x && Player.x < Map[7][0].x + Map[7][0].width &&
            Map[7][0].y < Player.y && Player.y < Map[7][0].y + Map[7][0].height && keys.up)
             {Game = "Over"}           
                                                                                                 }                                                   
                                                                                               }                
                                  }                
                                }
                       };

  // Flying mobs switch direction every five seconds
  var ReverseT; // The instance of direction-switch is recorded 
  if (Level == 1 || Level == 2 || Level == 4 || Level == 6) {setInterval(() => {
    if (keys.pause == false) {ReverseT--}}, 1)};         
  
  function Reverse() {let P = Map[6].length;
    if (ReverseT <= 0) {ReverseT += 1000;
      for (let p = 0; p < P; p++) {Map[6][p].y_v *= -1}
                       }
                     };

  var HexR; var HexG; var HexB; var HexT;
  var Hex1; var Hex2; var Hex3; var Hex4;

  function ScrollFunction() {
    if (Level == 1) {x_b[1]++}
    if (Level == 2) {if (x_b[1] < -1976) {x_b[1]++} else {x_b[1] -= 3000}}
    if (Level == 3) {y_b[0] += 0.165}
    if (Level == 4) {if (x_f[1] > -4976) {x_f[1]++} else {x_f[1] += 3000};
      
      HexR = Math.round(50).toString(16);
      HexG = Math.round(50 + ((Player.x - Map[2][0].x) / 4000)).toString(16);
      HexB = Math.round(50 + ((Player.x - Map[2][0].x) / 800)).toString(16);
      HexT = "#" + HexR + HexG + HexB; 
      
      if (Player.x - Map[8][0].x < 10000) {
        Hex1 = Math.round(50 + ((Player.x - Map[8][0].x) / 50)).toString(16);
        Hex2 = Math.round(0).toString(16); 
        Hex3 = Math.round(0).toString(16) };      
      if (10000 <= Player.x - Map[8][0].x && Player.x - Map[8][0].x < 30000) {
        Hex1 = Math.round(250).toString(16);
        Hex2 = Math.round((Player.x - Map[8][0].x - 10000) / 80).toString(16); 
        Hex3 = Math.round(0).toString(16)                                    };
      if (30000 <= Player.x - Map[8][0].x && Player.x - Map[8][0].x < 50000) {
        Hex1 = Math.round(250 - ((Player.x - Map[8][0].x - 30000) / 80)).toString(16);
        Hex2 = Math.round(250).toString(16); 
        Hex3 = Math.round(0).toString(16)                                    };  
      if (50000 <= Player.x - Map[8][0].x) {
        Hex1 = Math.round((Player.x - Map[8][0].x - 50000) / 100).toString(16);
        Hex2 = Math.round(250).toString(16); 
        Hex3 = Math.round((Player.x - Map[8][0].x - 50000) / 100).toString(16)  
                                           };
      if (Hex1.length == 1) {Hex1 = "0" + Hex1}
      if (Hex2.length == 1) {Hex2 = "0" + Hex2}
      if (Hex3.length == 1) {Hex3 = "0" + Hex3};                                        
      if (Player.x < Map[2][1].x || Player.jump) {Hex4 = "#" + Hex1 + Hex2 + Hex3} 
      else {Hex4 = "white"}                                        
                    };

    // Disable Block two seconds after frozen by enemy
    if (Block == "hit") {
      if (Level == 2) {// Back to spawn you go
        x_b = JSON.parse(JSON.stringify(X_b2)); y_b = JSON.parse(JSON.stringify(Y_b2));
        Map = JSON.parse(JSON.stringify(MapSpec)); setTimeout(() => {Block = false}, 10);
        Player.x = Map[0].x; Player.y = Map[0].y; Player.Stamina = -2; ReverseT = 1000
                      } 
      else {setTimeout(() => {Block = false}, 2000)}              
                        };

    // Level 3 exclusive mechanic: Crosshairs follow player
    if (Level == 3) 
     {if (Map[5][0].x < Player.x + 25) {Map[5][0].x += 2.3}; 
      if (Map[5][0].x > Player.x + 25) {Map[5][0].x -= 2.3};
      if (Map[5][0].y < Player.y + 25) {Map[5][0].y += 4}; 
      if (Map[5][0].y > Player.y + 25) {Map[5][0].y -= 4};
    
      for (let l = 0; l < 2; l++) {
        if (Map[3][l].y_v < 0) {PlatformImage[l].src = "Lift-On.gif"}
        if (Map[3][l].y_v == 0) {PlatformImage[l].src = "Lift-Off.gif"}
        if (Map[3][l].y_v > 0) {PlatformImage[l].src = "Lift-Drop.gif"} 
                                  }
     };
    if (Scroll[0] == true) {let I = Map.length;
      // The below two lines disable Block when Player y coordinates exceed those of obstacle
      if (Player.x < 512) {Player.x++}; if (Player.x > 512) {Player.x--};
      if (Block == "right" && Player.x > 510 || Block == "left" && Player.x < 514) {Block = false};
      // Disable Player.bounce, cannot leave Player invincible after all...
      if (Player.bounce == true) {setTimeout(function() {Player.bounce = false}, 50)};

      // Stage horizontally scrolls with player, by moving map opposite to player's velocity  
      for (let i = 0; i < I; i++) {let J = Map[i].length;
        for (let j = 0; j < J; j++) {
          if (Block==false || Block=="right" && Player.x_v<0 || Block=="left" && Player.x_v>0) { 
            if ((Level!=4 && Level!=6) || (Level==4 && [i,j]!=[7,0]) || (Level==6 && i!=1)) 
            {Map[i][j].x -= Player.x_v; Block = false}
            if (Level == 6 && i == 1) {Map[i][j].x -= 0.4*Player.x_v; Block = false}           }
                                    }
                                  };
      if (Block == false) {
        if (Level == 1) {x_b[1] -= 0.125*Player.x_v; // Moving the background
          x_b[2] -= 0.25*Player.x_v; x_b[3] -= 0.5*Player.x_v} 
        if (Level == 2) {x_b[1] -= 0.125*Player.x_v; 
                         x_b[2] -= 0.25*Player.x_v; x_b[3] -= 0.33*Player.x_v}
        if (Level == 3) {x_b[1] -= 0.25*Player.x_v; x_b[2] -= 0.5*Player.x_v}
        if (Level == 4) {x_b[2] -= 0.025*Player.x_v; x_b[3] -= 0.025*Player.x_v; 
                         x_b[4] -= 0.013*Player.x_v; x_f[1] -= 0.125*Player.x_v } 
        if (Level == 5) {x_b -= 0.15*Player.x_v}
        if (Level == 6) {y_b -= 0.25*Player.x_v}
        if (Level == 7) {x_b[1] -= 0.15*Player.x_v; x_b[2] -= 0.4*Player.x_v}
                          }};                                                                                  

    // Level 4 exclusive mechanic: Shark x coordinate aligns with player's
    if (Level == 4) 
      {if (Map[2][0].x + Map[2][0].width < Player.x && Player.x < Map[2][1].x - Player.width) 
        {Map[7][0].x = Player.x + 50} else {
          if (Player.x > Map[2][1].x-1000) {Map[7][0].x = Map[2][1].x - Map[7][0].width}
          else {Map[7][0].x = Map[2][0].x + Map[2][0].width}
                                      }
      }                       

    if (Scroll[1] == false) {if (Player.y + Player.height > 556) {let I = Map.length;
      for (let i = 0; i < I; i++) {let J = Map[i].length;
        for (let j = 0; j < J; j++) {Map[i][j].y--}
                                           }                     }};

    if (Scroll[1] == true) {
      if (Player.y < 30) {Player.y++}; // Don't want the player to disappear off-stage

      // Stage vertically scrolls with player, by moving map opposite to player's velocity  
      if (Level == 1) {for (let i = 0; i < 8; i++) {let J = Map[i].length;
          for (let j = 0; j < J; j++) {Map[i][j].y -= Player.y_v}         };
        {y_b[1] -= 0.05*Player.y_v; // Moving the background
         y_b[2] -= 0.25*Player.y_v; y_b[3] -= 0.5*Player.y_v}}; 
      if (Level == 2) {for (let i = 0; i < 8; i++) {let J = Map[i].length;
          for (let j = 0; j < J; j++) {Map[i][j].y -= Player.y_v}};
         y_b[1] -= 0.05*Player.y_v; // Moving the background
         y_b[2] -= 0.25*Player.y_v; y_b[3] -= Player.y_v};
      if (Level == 3) {for (let i = 0; i < 6; i++) {let J = Map[i].length;
          for (let j = 0; j < J; j++) {Map[i][j].y -= Player.y_v}}; 
        y_b[1] -= 0.25*Player.y_v; y_b[2] -= 0.5*Player.y_v};
      if (Level == 4) {for (let i = 0; i < 8; i++) {let J = Map[i].length;
          for (let j = 0; j < J; j++) {Map[i][j].y -= Player.y_v}};
        y_b[0] -= 0.06*Player.y_v; y_b[2] -= 0.2*Player.y_v; y_b[3] -= 0.4*Player.y_v;
        y_b[4] -= 0.2*Player.y_v; y_f[0] -= 0.2*Player.y_v; y_f[1] -= 0.3*Player.y_v
                      };
      if (Level == 5) {for (let i = 0; i < 3; i++) {let J = Map[i].length;
          for (let j = 0; j < J; j++) {Map[i][j].y -= Player.y_v}}; y_b -= 1.6*Player.y_v};
      if (Level == 6) {Map[1][0].y -= 0.5*Player.y_v; for (let i = 2; i < 8; i++) {let J = Map[i].length;
          for (let j = 0; j < J; j++) {Map[i][j].y -= Player.y_v}}};         
                           }}; 

  function PlayerMotion() {
    // Map's left boundary for player
    if (Level != 5) {if (Player.x < Map[2][0].x) {Player.x = Map[2][0].x}}
    else {if (Player.x < Map[1][0].x) {Player.x = Map[1][0].x}}; // If Level *is* 5 of course

    // Map's right boundary for player
    if (Level != 5) {
      if (Player.x > Map[2][Map[2].length-1].x + Map[2][Map[2].length-1].width - Player.width) 
        {Player.x = Map[2][Map[2].length-1].x + Map[2][Map[2].length-1].width - Player.width}
                    }
    else {if (Player.x > Map[1][0].x + Map[1][0].width - Player.width) 
          {Player.x = Map[1][0].x + Map[1][0].width - Player.width}};
    
    // If the player is not jumping apply the effect of friction
    if (Player.jump == false) {if (Level != 6) {Player.x_v *= friction}} else {if (Player.y_v < 10) {
      // If the player is in the air then apply the effect of gravity
      Player.y_v += gravity}}; Player.jump = true; 

    // If a side arrow key is pressed initiate/maintain the relevant horizontal velocity
    if (keys.left && Block != "hit") {if (Level != 7) {Player.x_v = -2.5} else {Player.x_v = -1}};
    if (Level != 6 && keys.right && Block != "hit") 
      {if (Level != 7) {Player.x_v = 2.5} else {Player.x_v = 1}};
    if (Level == 6 && keys.right) {if (Player.x_v < 2.5) {Player.x_v = 2.5}};

    // Emergency brakes! <:-O
    if (Level == 6 && Player.x > 550 && Player.x_v > 2.5) {Player.x_v = 2.5};
                          };  
                
  var Speed = Math.sqrt(Player.x_v**2 + Player.y_v**2);
  var Gradient = Player.y_v / Player.x_v;                        

  function Glide() {if (Player.jump) {Player.y_v += 0.4*gravity} 
    else {if (keys.right && Player.x_v < 1) {Player.x_v = 1};
          if (Player.jump == false && keys.jump) {Player.y_v = -10; Player.jump = true}};
    if (keys.up) {
      if (Player.x_v > 0.5) {Player.y_v -= 0.3;
        if (Player.y_v > 0.5) {Player.x_v += 0.3*Player.y_v; Player.y_v -= 0.1*Player.x_v}
        if (Player.y_v < 0.5) {Player.x_v -= 0.1}
                            }
      if (Player.x_v < 0.5) {
        if (Player.y_v > 0.5) {Player.x_v += 0.1; Player.y_v -= 0.1}
                           }                     
                 }
    if (keys.down) {
      if (Player.y_v < 0) {Player.x_v += 0.1; Player.y_v += 0.1}
      if (Player.x_v > 0.1 && Player.y_v >= 0) {Player.x_v -= 0.1; Player.y_v += 0.1}
                   }
    
    if (Player.x > Map[2][1].x) {Player.Active = false;
      if (Player.jump) {Player.y_v = ((Map[1][0].y - Player.y) / 100) + 1;
        if (Map[1][0].y - Player.y > 500) {Player.x_v = 40*(1 -(Map[1][0].y - Player.y)/50000)}
                       }        
      else {if (Player.x_v >= 60) {Player.x_v *= 0.999}
        if (10 <= Player.x_v && Player.x_v < 60) {Player.x_v *= 0.99} 
        if (Player.x_v < 10) {Player.x_v *= 0.9}
        if (Player.x_v < 0.01) {Player.x_v = 0}    
           }                    }
                   };                        
                       
  function MobMotion() {
    if (Level < 3) {let D = Map[5].length;
    for (let d = 0; d < D; d++) {Map[5][d].x += Map[5][d].x_v;
    Map[5][d].y++;
    for (let i = 2; i < 5; i++) {let J = Map[i].length;
      for (let j = 0; j < J; j++) {
        // Duck x coordinate lies between those of solid element
        if (Map[i][j].x - Map[5][d].width < Map[5][d].x && 
          Map[5][d].x < Map[i][j].x + Map[i][j].width) 
          {// Duck y coordinate lies between those of solid element 
          if (i == 4 && Map[i][j].y + 10 < Map[5][d].y + Map[5][d].height 
            && Map[5][d].y < Map[i][j].y + Map[i][j].height) {Map[5][d].x_v *= -1};
          // Duck y coordinate lies directly above those of solid element
        if (Map[i][j].y < Map[5][d].y + Map[5][d].height && 
        Map[5][d].y + Map[5][d].height <= Map[i][j].y + 10) {
          Map[5][d].y = Map[i][j].y - Map[5][d].height
                                                            }              
          }                       }     
                                }
                                }
                   };

    if (Level == 5) {for (let d = 0; d < 9; d++) {Map[2][d].x += Map[2][d].x_v;
      Map[2][d].y++;
        // Chicken x coordinate lies between those of solid element
        if (Map[1][0].x - Map[2][d].width < Map[2][d].x && 
          Map[2][d].x < Map[1][0].x + Map[1][0].width)       {
          // Chicken y coordinate lies directly above those of solid element
            if (Map[1][0].y < Map[2][d].y + Map[2][d].height && 
            Map[2][d].y + Map[2][d].height <= Map[1][0].y + 10) 
              {Map[2][d].y = Map[1][0].y - Map[2][d].height} }                                                                     
                                                 }
                    };                            
      // Flying physics for flying mobs
      if (Level != 3 && Level != 5 && Level != 7) {let P = Map[6].length;
        for (let p = 0; p < P; p++) {Map[6][p].y += Map[6][p].y_v}}
      if (Level == 3) {for (let p = 0; p < 2; p++) {Map[3][p].y += Map[3][p].y_v}}
      
      // Shark jump call
      if (Level == 4) {Map[7][0].y += Map[7][0].y_v;
        if (Map[1][0].y - Player.y < 500 && Map[7][0].mode == 0 &&
            Map[2][0].x + Map[2][0].width < Player.x && Player.x < Map[2][1].x - Player.width) 
        {Map[7][0].mode = 1};
                      }
                       };

  function Snatch() {
    if (Map[7][0].mode == 1) {Map[7][0].y_v = 1; 
                              if (Map[7][0].y > Map[1][0].y + 50) {Map[7][0].mode = 2}} 
    if (Map[7][0].mode == 2) {Map[7][0].y_v -= 0.5;
                              if (Map[7][0].y < Map[1][0].y - 200) {Map[7][0].mode = 3}}
    if (Map[7][0].mode == 3) {Map[7][0].y_v += gravity;
                              if (Map[7][0].y > Map[1][0].y - 100 && Map[7][0].y_v > 2) 
                                {Map[7][0].mode = 4}                                 }
    if (Map[7][0].mode == 4) {if (Map[7][0].y_v > -1) {Map[7][0].y_v--};
                              if (Map[7][0].y <= Map[1][0].y - 120) 
                              {Map[7][0].y_v = 0; Map[7][0].mode = 0}   }                                                                                
                     };

  var SceneL4; 
  let Glider = new Image(); Glider.src = "Glider.gif"; let Gx = 600;                  
  function CutsceneL4() {
    if (SceneL4 == 0) {AppImage[127].src = "TruckFLA1.gif"; Map[7][127].x = Player.x + 500;
                       Icon[0].src = "Icon_Clock.gif"; SceneL4 = 1                         }
    if (SceneL4 == 1) {AppImage[127].src = "TruckFLA1.gif"; 
                       if (Player.x < Map[7][127].x + 220) {Map[7][127].x--}; 
                       if (Player.x == Map[7][127].x + 220) 
                       {AppImage[127].src = "TruckFLA2.gif"; SceneL4 = 2; 
                        Icon[0].src = "Icon_Click1.gif"                  }                                    
                      }
    if ((2 <= SceneL4 && SceneL4 < 14) || (17 <= SceneL4 && SceneL4 < 23) || 
        (24 <= SceneL4 && SceneL4 < 57)                                     ) 
    {canvas.onclick = () => {SceneL4++}};
    if ((14 <= SceneL4 && SceneL4 <= 16) || SceneL4 == 23) {canvas.onclick = []; 
                                                            Icon[0].src = "Icon_Clock.gif"}
    if (SceneL4 == 14) {Map[8][0].x = 300; Map[8][0].y = -1000; 
                        setTimeout(() => {SceneL4 = 15}, 1000) }
    if (SceneL4 == 15) {setTimeout(() => {SceneL4 = 16}, 1000)}
    if (SceneL4 == 16) {if (Map[8][0].y < 450) {Map[8][0].y += 5} 
      else {SceneL4 = 17; Icon[0].src = "Icon_Click1.gif"}       }
    if (SceneL4 == 23) {setTimeout(() => {SceneL4 = 24; Icon[0].src = "Icon_Click1.gif"}, 3000)}  
                        }                          
  
  // "I'm gonna get you!" >:-D                   
  function Sweep() {
    if (Level == 1) {Map[8][0].x += Map[8][0].x_v; Map[8][1].x += Map[8][1].x_v}
    if (Level == 4 && Player.x < Map[2][1].x) {Map[8][0].x += Map[8][0].x_v}
    if (Level == 4) {if (Player.Active) {Map[8][0].y = Player.y - 40}}
    if (Level == 6) {Map[8][0].x += Map[8][0].x_v}
    if (Level == 7) {if (Player.x - Map[4][0].x > 500) {Map[4][0].x += 1.5}}
                   };

  // Too bad, try again
  function Death() {
    if (Level == 1) {
      if (Player.y > 580 || Player.x < Map[8][0].x + 0.5*Map[8][0].width) {
        Map = JSON.parse(JSON.stringify(MapSpec)); Player.x = Map[0].x; Player.y = Map[0].y;
        Player.x_v = 0; Player.y_v = 0; Player.Lives--; Player.Stamina = 5;
        x_b = JSON.parse(JSON.stringify(X_b1)); Block = false; 
        y_b = JSON.parse(JSON.stringify(Y_b1)); ReverseT = 1000           }                                                                                         
                    };

    if (Level == 3) {
      if (Map[5][0].x > Player.x + 10 && Map[5][0].x < Player.x + 40 
          && Map[5][0].y > Player.y + 10 && Map[5][0].y < Player.y + 40) {
        Map = JSON.parse(JSON.stringify(MapSpec)); Player.x = Map[0].x; Player.y = Map[0].y;
        Player.x_v = 0; Player.y_v = 0; Player.Lives--; Player.Stamina = 5; 
        x_b = JSON.parse(JSON.stringify(X_b3)); y_b = JSON.parse(JSON.stringify(Y_b3));                    
      T = [3, 0]                                                         }  
                    };
                                  
    if (Level == 4) {
      if ((Map[2][0].x+Map[2][0].width<Player.x && Player.x<Map[2][1].x && Player.y>Map[7][0].y) || 
          Player.x < Map[8][0].x + 0.5*Map[8][0].width) {
        Map = JSON.parse(JSON.stringify(MapSpec)); Player.x = Map[0].x; Player.y = Map[0].y;
        Player.x_v = 0; Player.y_v = 0; Player.Lives--; Block = false; 
        x_b = JSON.parse(JSON.stringify(X_b4)); y_b = JSON.parse(JSON.stringify(Y_b4));
        x_f = JSON.parse(JSON.stringify(X_f4)); y_f = JSON.parse(JSON.stringify(Y_f4));          
        ReverseT = 1000                                 }  
                    }                                         
                   };

  var UserName = prompt("Name your avatar");          

  const SpeechBox = [new Image(), new Image()];
  SpeechBox[0].src = "SpeechBox.gif";

  var Text = []; var T; 
  var Countdown = setInterval(() => {if (T[1] > 0) {if (keys.pause == false) {T[1]--}}
                  else if (T[0] > 0) {if (keys.pause == false) {T[0]--; T[1] = 59}}}, 1000);   

  let t = 0;

  function Message() {// Send different messages to player depending on level and position
    if (Level == 1) {if (Player.x <= 400) {Text = ["RUN, " + UserName + "!"]; 
                                           SpeechBox[1].src = "SpeechIcon_Alert_Farmer.gif"};
      if (400 < Player.x && Player.x < 550) {Text = []};
      if (550 < Player.x && Player.y > 50) {
        Text = ["Easy: Press the Down key to enter the drain",                                             
                "Hard: Press the Up key to climb the water column"]; 
        SpeechBox[1].src = "SpeechIcon_Info.gif"};
      if (Player.x >= 700 && Player.y <= 50) {SpeechBox[1].src = "SpeechIcon_Alert.gif"; 
        Text = ["Hope you bought yourself enough time to make the climb"]}
                    };
    if (Level == 2) {if (Player.y > Map[2][1].y) {
      if (Player.x < 100) {Text = ["No one's chasing after you this level, don't worry"];
                           SpeechBox[1].src = "SpeechIcon_Info.gif"                    };
      if (100 <= Player.x && Player.x < 400) {Text = 
      ["But if you get hit, then it's back to the spawn for you!"]; 
      SpeechBox[1].src = "SpeechIcon_Redo.gif"                   };
      if (400 <= Player.x && Player.x < 550) {Text = []};
      if (Player.x >= 550) {Text = ["This time, press the Up key to enter the drain above"];
                            SpeechBox[1].src = "SpeechIcon_Info.gif"                        }
                                                 }
                     else {
      if (1000 < Player.x - Map[2][1].x && Player.x - Map[2][1].x < 2000) 
        {Text = ["You found the glitch! Now head --> right --> to locate the portal."];
         SpeechBox[1].src = "SpeechIcon_Info.gif"};
      if (2200 < Player.x - Map[2][1].x && Player.x - Map[2][1].x < 2500) 
        {Text = ["Press the Up key to enter the portal."];
         SpeechBox[1].src = "SpeechIcon_Info.gif"}; 
      if (Player.x - Map[2][1].x < 1000 || Player.x - Map[2][1].x > 2500 ||
          (2000 < Player.x - Map[2][1].x && Player.x - Map[2][1].x < 2200)) {Text = []}
                          }            
                    };
    if (Level == 3) {if (T[0] == 3) 
        {Text = ["Survive for three minutes"]; SpeechBox[1].src = "SpeechIcon_Clock.gif"}
      if (T[0] == 2) {
        if (T[1] > 55)
          {Text = ["Survive for three minutes"]; SpeechBox[1].src = "SpeechIcon_Clock.gif"}
        if (55 >= T[1] && T[1] >= 40) {Text = []}
        if (40 > T[1] && T[1] >= 30) 
          {Text = ["Ah, 'tis a splendid day for hunting pheasants!",
                   "What shall God's grace of abundance yield me today?"]; 
           SpeechBox[1].src = "SpeechIcon_Sniper1.gif"                    }
        if (30 > T[1] && T[1] > 25) 
          {Text = ["I'm no pheasant, stop pointing that rifle at me!"]; 
           SpeechBox[1].src = "SpeechIcon_Chicken1.gif"                }
        if (25 >= T[1]) {Text = []}
                     }
      if (T[0] == 1) {
        if (40 > T[1] && T[1] >= 30) 
          {Text = ["Never before have I seen a pheasant with such agility,",
                   "truly a prize to be earned"                             ]; 
           SpeechBox[1].src = "SpeechIcon_Sniper1.gif"                        }
        if (30 >= T[1] && T[1] >= 20) {Text = []}
        if (20 > T[1] && T[1] >= 10) 
          {Text = ["At least the farmer killed us to feed his family,",
                   "in your case it's just a sick sport!"              ]; 
           SpeechBox[1].src = "SpeechIcon_Chicken1.gif"                  }
        if (10 > T[1]) 
          {Text = ["But alas my dear trophy, the honour of my prestigious",
                   "family dynasty is an immense one to uphold"            ]; 
           SpeechBox[1].src = "SpeechIcon_Sniper1.gif"                       }
                     }
      if (T[0] == 0) {
        if (T[1] >= 55) 
          {Text = ["Get a life, psycho!"]; SpeechBox[1].src = "SpeechIcon_Chicken2.gif"}
        if (55 > T[1] && T[1] > 40) {Text = []}
        if (40 >= T[1] && T[1] >= 30)
          {Text = ["Good Lord, the hour of darkness is hastily falling upon us!",
                   "I must return to the stronghold soon!"                       ]; 
           SpeechBox[1].src = "SpeechIcon_Sniper2.gif"                             }
        if (30 > T[1] && T[1] > 10) {Text = []}
        if (10 >= T[1] && T[1] > 3)
          {Text = ["Oh bugger! I must retreat at once!",
                   "Until next time, my dear pheasant, g'day!"]; 
           SpeechBox[1].src = "SpeechIcon_Sniper2.gif"          }
        if (3 >= T[1]) 
          {Text = ["Go to hell!"]; SpeechBox[1].src = "SpeechIcon_Chicken2.gif"}                  
                     }                              
                    };
    if (Level == 4) {
      if (Player.x - Map[2][0].x <= 1000) {Text = []}
      if (1000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 3000) {
        Text = ["Cruise higher, that shark can leap out of water!"]; 
        SpeechBox[1].src = "SpeechIcon_Eagle1.gif"                         }
      if (3000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 7000) {
        Text = ["Cruise lower, that's where the speed boosts are!",
                "You cannot outrun the eagle at high altitudes!"   ]; 
        SpeechBox[1].src = "SpeechIcon_Shark1.gif"                         } 
      if (7000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 9000) {
        Text = ["Shut up! I have a nest of chicks to feed!"]; 
        SpeechBox[1].src = "SpeechIcon_Eagle2.gif"                         }
      if (9000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 10000) 
        {Text = ["You sure about that?"]; SpeechBox[1].src = "SpeechIcon_Shark2.gif"}  
      if (10000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 13000) {
        Text = ["Why don't you chase after the ducks and pigeons instead?"]; 
        SpeechBox[1].src = "SpeechIcon_Chicken3.gif"                         }  
      if (13000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 18000) {
        Text = ["I've become bored of their taste,", 
                "I want to try something unique for a change"]; 
        SpeechBox[1].src = "SpeechIcon_Eagle5.gif"                           }
      if (18000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 25000) {
        Text = ["I knew that 'poor mother supporting her starving chicks' excuse",
                "was a crock of shit! Word of advice:", 
                "Next time, don't hunt just after a meal, fat-ass!"               ]; 
        SpeechBox[1].src = "SpeechIcon_Shark2.gif"                           }
      if (25000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 30000) {
        Text = ["I swear to God, if you don't shut that wide trap of yours..."]; 
        SpeechBox[1].src = "SpeechIcon_Eagle3.gif"                           }
      if (30000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 40000) {
        Text = ["Then you'll do what? Have a heart attack in mid-air?",
                "Speaking of which, I wonder what eagle tastes like"   ]; 
        SpeechBox[1].src = "SpeechIcon_Shark3.gif"                           }
      if (40000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 45000) {
        Text = ["I dare you to try, primitive fish!", "I'll peck and scratch your eyes out"]; 
        SpeechBox[1].src = "SpeechIcon_Eagle3.gif"                           }
      if (45000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 60000) {
        Text = ["Are you conserving your energy for that?",
                "is that why you can't keep up with us, Tubby Lumpkins?"]; 
        SpeechBox[1].src = "SpeechIcon_Shark3.gif"                           }
      if (60000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 80000) {
        Text = ["Hey chicken, here's a joke...",
                "What does slow-coach here have in common with a cargo",
                "variant of the Boeing 747 and Airbus A380?"             ]; 
        SpeechBox[1].src = "SpeechIcon_Shark4.gif"                           } 
      if (80000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 90000) {
        Text = ["She's flying with a heavy payload in her belly!",
                "Can you hear us back there, fat-ass?"            ]; 
        SpeechBox[1].src = "SpeechIcon_Shark5.gif"                           } 
      if (90000 < Player.x - Map[2][0].x && Player.x - Map[2][0].x <= 100000) {
        Text = ["Why don't you go extinct with the dinosaurs,",
                "you cold grey bastard?"                       ]; 
        SpeechBox[1].src = "SpeechIcon_Eagle4.gif"                            }
      if (100000 < Player.x - Map[2][0].x && Player.jump) {
        Text = ["Land at last! Go fuck yourselves, the pair of you!"]; 
        SpeechBox[1].src = "SpeechIcon_Chicken2.gif"      } 
      if (Map[2][1].x < Player.x && Player.jump == false && Player.x_v > 0) {
        Text = ["Thank you for flying with Fryanair"]; 
        SpeechBox[1].src = "SpeechIcon_Fryanair.gif"                        }  
      if (SceneL4 == 1) {Text = ["My new pair of wings are already making me sick!"];
                         SpeechBox[1].src = "SpeechIcon_Chicken4.gif"                }
      if (SceneL4 == 2) {Text = ["Dear Lord, now what?"];
                         SpeechBox[1].src = "SpeechIcon_Chicken5.gif"}     
      if (SceneL4 == 3) {Text = ["Join the Fowl Liberation Army today!"];
                         SpeechBox[1].src = "SpeechIcon_FLA_Spokesman1.gif"}
      if (SceneL4 == 4) {Text = ["Yeah, about that, I'm not in the right physical or",
                                 "mental state for military activism right now"];
                         SpeechBox[1].src = "SpeechIcon_Chicken5.gif"            } 
      if (SceneL4 == 5) {Text = ["We saw how gracefully you crossed the sky,",
                                 "no one in our militia could glide like that"];
                         SpeechBox[1].src = "SpeechIcon_FLA_Marksman1.gif"      } 
      if (SceneL4 == 6) {Text = ["You'd make an excellent scout for espionage missions"]} 
      if (SceneL4 == 7) {Text = ["Where did you get that kite from anyway?"];
                         SpeechBox[1].src = "SpeechIcon_FLA_Spokesman1.gif"  }   
      if (SceneL4 == 8) {Text = ["I stole it from my butcher farmer's son during my escape",
                                 "from the farm"                                            ];
                         SpeechBox[1].src = "SpeechIcon_Chicken6.gif"                         }
      if (SceneL4 == 9) {Text = ["We also began our lives in captivity, now here we are,",
                                 "freeing other poultry birds.",
                                 "We intend to spread this liberation worldwide."         ];
                         SpeechBox[1].src = "SpeechIcon_FLA_Spokesman1.gif"                 }
      if (SceneL4 == 10) {Text = ["Just wondering, does this also apply to birds of prey?"];
                          SpeechBox[1].src = "SpeechIcon_Chicken6.gif"                      }
      if (SceneL4 == 11) {Text = ["No, they are our enemies!",
                                  "Has that eagle circling above us been bothering you?"];
                          SpeechBox[1].src = "SpeechIcon_FLA_Spokesman1.gif"              }   
      if (SceneL4 == 12) {Text = ["Now that you mention it, it followed me all the way here!",
                                  "I barely made it across with my life,",
                                  "it probably only stopped because of your presence!"];
                          SpeechBox[1].src = "SpeechIcon_Chicken9.gif"                  }
      if (SceneL4 == 13) {Text = ["Watch this..."];
                          SpeechBox[1].src = "SpeechIcon_FLA_Marksman2.gif"}
      if (SceneL4 == 14) {Text = []}                    
      if (SceneL4 == 17) {Text = ["Does lead taste \"unique\" enough for ya? HAH!"];
                          SpeechBox[1].src = "SpeechIcon_Chicken7.gif"              }    
      if (SceneL4 == 18) {Text = ["That's the warmongering attitude we like to see!",
                                  "Now imagine how fulfilling it would be to enact some",
                                  "similar retribution upon that accursed farmer of yours!"];
                          SpeechBox[1].src = "SpeechIcon_FLA_Spokesman2.gif"                 }
      if (SceneL4 == 19) {Text = ["Like I said, I feel like shit at the moment,",
                                  "I'm amazed at how quickly the sand absorbed my vomit"];
                          SpeechBox[1].src = "SpeechIcon_Chicken6.gif"                    } 
      if (SceneL4 == 20) {Text = ["You can get plenty of rest at our camp,",
                                  "hop onto our truck, our spiritual leader will be",
                                  "delighted to see you as our newest recruit"       ];
                          SpeechBox[1].src = "SpeechIcon_FLA_Spokesman2.gif"           }
      if (SceneL4 == 21) {Text = ["(They're gonna harvest my organs and sell them on",
                                  "the black market, aren't they?)"                   ];
                          SpeechBox[1].src = "SpeechIcon_Chicken8.gif"                  }
      if (SceneL4 == 22) {Text = ["(Stop being so paranoid, not everything's out",
                                  "to get you! Being on the run has taken its toll",
                                  "on my mental faculties, Jesus Christ!)"          ]} 
      if (SceneL4 == 23) {Text = []}                            
      if (SceneL4 == 24) {Text = ["Cockblock's the name,",
                                  "spiritually-enlightening fowlkind to victory is my game!",
                                  "How are you feeling at this moment?"                      ];
                          SpeechBox[1].src = "SpeechIcon_Cockblock1.gif"}
      if (SceneL4 == 25) {Text = ["I'm a lot better, thank you.",
                                  "For a militia base, I'm amazed by the high quality of",
                                  "your memory foam mattresses"                           ];
                          SpeechBox[1].src = "SpeechIcon_Chicken10.gif"                     } 
      if (SceneL4 == 26) {Text = ["It all lies in the priciple of marginal gains, my boy.",
                                  "A well-rested brother is able to strike terror into the",
                                  "enemies of fowl-kind more efficiently"                   ];
                          SpeechBox[1].src = "SpeechIcon_Cockblock1.gif"                      }
      if (SceneL4 == 27) {Text = ["To think that a new recruit would fly across the ocean",
                                  "only to end up right on our doorstep...",
                                  "Victory is inevitable now that God's on our side!"      ];
                          SpeechBox[1].src = "SpeechIcon_Cockblock2.gif"                     }
      if (SceneL4 == 28) {Text = ["One thing that piques my curiosity, how do you",
                                  "raise the funds for your equipment and operations?"];
                          SpeechBox[1].src = "SpeechIcon_Chicken11.gif"                 }  
      if (SceneL4 == 29) {Text = ["Well you see, " + UserName + ",",
                                  "This island has highly lucrative tax laws, attracting",
                                  "loads of wealthy investors and money launderers here"  ];
                          SpeechBox[1].src = "SpeechIcon_Cockblock1.gif"                    } 
      if (SceneL4 == 30) {Text = ["Ironically, whilst hiding their wealth from their local",
                                  "government, they flaunt it openly here, sporting",
                                  "designer watches, handbags, jewellery, the list goes on" ]}
      if (SceneL4 == 31) {Text = ["Then we enter the scene to divert the cashflow from their",
                                  "hedonistic opulence towards our more noble cause:",
                                  "Global Fowldom!"                                           ]} 
      if (SceneL4 == 32) {Text = ["It is said that the crime rate on this island is high,",
                                  "which I rebut by asserting that socialism is not a crime.",
                                  "They call it \"theft\", we call it \"wealth redistribution\"!"]}
      if (SceneL4 == 33) {Text = ["I admire your optimism and all, but don't you think",
                                  "that you may be attempting to boil the ocean with such",
                                  "Napoleon Bonaparte-tier ambitions?"                     ];
                          SpeechBox[1].src = "SpeechIcon_Chicken12.gif"                      }
      if (SceneL4 == 34) {Text = ["I suppose you have a point, my targets might be unattainable,",
                                  "however the whole agenda lies in igniting fervour for",
                                  "our political cause"                                           ];
                          SpeechBox[1].src = "SpeechIcon_Cockblock1.gif"                            }
      if (SceneL4 == 35) {Text = ["Complacency and mediocrity form the Achilles heel to",
                                  "motivation. Aim for the stars, so you land on the moon",
                                  "at least."                                              ]}
      if (SceneL4 == 36) {Text = ["Our modus operandi have always served us well at the",
                                  "negotiating table with our suppliers. You'll understand",
                                  "once you become the head of a new cell at this militia"  ]}
      if (SceneL4 == 37) {Text = ["We barely know each other, yet you already wish to",
                                  "place me in such a position of command?"            ];
                          SpeechBox[1].src = "SpeechIcon_Chicken12.gif"                  }
      if (SceneL4 == 38) {Text = ["Now you listen here, " + UserName + ",",
                                  "I see great leadership potential in you"];
                          SpeechBox[1].src = "SpeechIcon_Cockblock3.gif"     }
      if (SceneL4 == 39) {Text = ["I'm just a simple chicken attempting to survive",
                                  "in a cold and cutthroat world"                   ];
                          SpeechBox[1].src = "SpeechIcon_Chicken11.gif"               }    
      if (SceneL4 == 40) {Text = ["And you're willing to cut throats in order to achieve",
                                  "that objective, I can sense it!",
                                  "That's what makes your spirit pure!"                   ];
                          SpeechBox[1].src = "SpeechIcon_Cockblock3.gif"                    }  
      if (SceneL4 == 41) {Text = ["No guarantees of material abundance necessary.",
                                  "You simply do what you have to do to survive."  ]}     
      if (SceneL4 == 42) {Text = ["Furthermore, you get a potent thrill out of the risk,",
                                  "you thrive off of uncertainty. Against all odds,",
                                  "you snatch victory from the jaws of defeat!"           ]} 
      if (SceneL4 == 43) {Text = ["A bastion of hope in times of hardship,",
                                  "you're EXACTLY what we need to steer our boat",
                                  "through rough, choppy seas!"                   ]}  
      if (SceneL4 == 44) {Text = ["It was never about the inevitable trip to the abbatoir.",
                                  "Sure, you were one of the handful of the poultry birds on",
                                  "your farm who could read the writing on the wall, however..."]}  
      if (SceneL4 == 45) {Text = ["what really spurred your disdain for your farmer was",
                                  "the monotonous, mediocre lifestyle of security he forced",
                                  "upon you, that\'s why you hate him so much, isn\'t that so?"]}
      if (SceneL4 == 46) {Text = ["Rather than die twice on the farm,",
                                  "it's better to die once attempting to escape"];
                          SpeechBox[1].src = "SpeechIcon_Chicken12.gif"           }    
      if (SceneL4 == 47) {Text = ["My brethren are bucket crabs, they held me back for so long,",
                                  "expecting me to join them in the cesspool of their",
                                  "meaningless existence!"                                       ]}
      if (SceneL4 == 48) {Text = ["I warned them that the gravy train wouldn't last forever,",
                                  "yet they still couldn't give a shit. They would rather die",
                                  "defending the farmer to prolongue their access to..."       ]}
      if (SceneL4 == 49) {Text = ["pathetic creature comforts! Grain and shelter are all",
                                  "their primitive minds ever cared about, fuck them all!",
                                  "At least grinding on the outside gives me purpose!"     ]}
      if (SceneL4 == 50) {Text = ["Do you really think that those degenerate reprobates",
                                  "would be of any utility to your organisation?"        ]} 
      if (SceneL4 == 51) {Text = ["But my boy, that's precisely the point!",
                                  "Every socialist state needs its proletariats; the useful",
                                  "idiots keeping the wheels of our utopia spinning"         ];
                          SpeechBox[1].src = "SpeechIcon_Cockblock2.gif"                       } 
      if (SceneL4 == 52) {Text = ["When we're the ones providing them with their precious",
                                  "bread and circuses, guess who they'll defend to the death"]}
      if (SceneL4 == 53) {Text = ["Us"]; SpeechBox[1].src = "SpeechIcon_Chicken10.gif"}       
      if (SceneL4 == 54) {Text = ["That's right! Our political culture will be more in tune",
                                  "with the Animal Farm style of socialism, with die-hard",
                                  "fanatics of the FLA (you and I for example) at the top."  ];
                          SpeechBox[1].src = "SpeechIcon_Cockblock1.gif"                       }
      if (SceneL4 == 55) {Text = ["You in?"]}
      if (SceneL4 == 56) {Text = ["Hell yeah!"]; SpeechBox[1].src = "SpeechIcon_Chicken13.gif"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                    };

    if (Level == 5) {if (Player.x <= 400) {Text = "--> In your own time... -->"};
      if (Player.x - Map[1][0].x > 500 && Player.x - Map[1][0].x < 1000) 
        {Text = 'Reflection: "How much I was missing out on in life..."'};
      if (Player.x - Map[1][0].x > 1000 && Player.x - Map[1][0].x < 1250) 
        {Text = 'Reflection: "To think that being on the verge of execution is what..."'};
      if (Player.x - Map[1][0].x > 1250 && Player.x - Map[1][0].x < 1500) 
        {Text = 'Reflection: "... it took to give me the window of opportunity I needed..."'};  
      if (Player.x - Map[1][0].x > 1500 && Player.x - Map[1][0].x < 1750) 
        {Text = 'Reflection: "... to make my escape."'};
      if (Player.x - Map[1][0].x > 1750 && Player.x - Map[1][0].x < 2000)  
        {Text = 'Reflection: "Escape or die, I would\'ve been free either way."'};
      if (Player.x - Map[1][0].x > 2000 && Player.x - Map[1][0].x < 2250) 
        {Text = 'Reflection: "One minute, I\'m chased by my would-be killer..."'};
      if (Player.x - Map[1][0].x > 2250 && Player.x - Map[1][0].x < 2500) 
        {Text = 'Reflection: "... up a waterfall, and the next I discover..."'};  
      if (Player.x - Map[1][0].x > 2500 && Player.x - Map[1][0].x < 2750) 
        {Text = 'Reflection: "... an ability to walk on clouds."'};
      if (Player.x - Map[1][0].x > 2750 && Player.x - Map[1][0].x < 3000) 
        {Text = 'Reflection: "I\'ll never forget the priceless look on that..."'};  
      if (Player.x - Map[1][0].x > 3000 && Player.x - Map[1][0].x < 3250) 
        {Text = 'Reflection: "... bloodthirsty butcher\'s face when he realised that..."'};
      if (Player.x - Map[1][0].x > 3250 && Player.x - Map[1][0].x < 3500) 
        {Text = 'Reflection: "... he was no longer able to pursue me."'};  
      if (Player.x - Map[1][0].x > 3500 && Player.x - Map[1][0].x < 3750) 
        {Text = 'Reflection: "Then the eagle took over and the rest is history."'};
      if (Player.x - Map[1][0].x > 3750 && Player.x - Map[1][0].x < 4000)
        {Text = 'Reflection: "The adrenaline rush... I never felt so alive!"'};
      if (Player.x - Map[1][0].x > 4000 && Player.x - Map[1][0].x < 4250) 
        {Text = 'Reflection: "Apart from sharks during the rough spring tides,..."'};
      if (Player.x - Map[1][0].x > 4250 && Player.x - Map[1][0].x < 4500) 
        {Text = 'Reflection: "... I need not worry about predators,..."'};  
      if (Player.x - Map[1][0].x > 4500 && Player.x - Map[1][0].x < 4750) 
        {Text = 'Reflection: "... least of all on dry land."'};
      if (Player.x - Map[1][0].x > 4750 && Player.x - Map[1][0].x < 5000) 
        {Text = 'Reflection: "As for the other chickens,..."'};
      if (Player.x - Map[1][0].x > 5000 && Player.x - Map[1][0].x < 5250) 
        {Text = 'Reflection: "the nesting hens were unable to escape the farm."'};
      if (Player.x - Map[1][0].x > 5250 && Player.x - Map[1][0].x < 5500) 
        {Text = 'Reflection: "They and their chicks will be spared..."'};  
      if (Player.x - Map[1][0].x > 5500 && Player.x - Map[1][0].x < 5750) 
        {Text = 'Reflection: "... for a few months anyway."'};
      if (Player.x - Map[1][0].x > 5750 && Player.x - Map[1][0].x < 6000) 
        {Text = 'Reflection: "A couple of us didn\'t survive the cloud passage."'};  
      if (Player.x - Map[1][0].x > 6000 && Player.x - Map[1][0].x < 6250) 
        {Text = 'Reflection: "Not that they\'ll be missed."'};
      if (Player.x - Map[1][0].x > 6250 && Player.x - Map[1][0].x < 6500)
        {Text = 'Reflection: "Back on the farm, they used to scoff the vast majority of..."'};
      if (Player.x - Map[1][0].x > 6500 && Player.x - Map[1][0].x < 6750) 
        {Text = 'Reflection: "... our grain feed, leaving the rest of us to starve."'};
      if (Player.x - Map[1][0].x > 6750 && Player.x - Map[1][0].x < 7000) 
       {Text = 'Reflection: "Their beefy build combined with their poor agility..."'};
      if (Player.x - Map[1][0].x > 7000 && Player.x - Map[1][0].x < 7250) 
       {Text = 'Reflection: "... made them easier pickings for the eagles."'};
      if (Player.x - Map[1][0].x > 7250 && Player.x - Map[1][0].x < 7500) 
       {Text = 'Reflection: "Ultimately, their greed was their own undoing."'};
      if (Player.x - Map[1][0].x > 7500 && Player.x - Map[1][0].x < 7750) 
       {Text = 'Reflection: "Good riddance!"'};
      if (Player.x - Map[1][0].x > 7750 && Player.x - Map[1][0].x < 8000) 
       {Text = 'Reflection: "The remoteness of this island combined with its tranquility..."'};
      if (Player.x - Map[1][0].x > 8000 && Player.x - Map[1][0].x < 8250) 
       {Text = 'Reflection: "... make it an idyllic spot to create multiple families."'};
      if (Player.x - Map[1][0].x > 8250 && Player.x - Map[1][0].x < 8500) 
       {Text = 'Reflection: "Very few roosters here for me to compete with..."'};
      if (Player.x - Map[1][0].x > 8500 && Player.x - Map[1][0].x < 8750) 
       {Text = 'Reflection: "... for the abundance of hens."'};
      if (Player.x - Map[1][0].x > 8750 && Player.x - Map[1][0].x < 9000) 
       {Text = 'Reflection: "The nearby jungle has a steady supply of fruit and seeds,..."'};
      if (Player.x - Map[1][0].x > 9000 && Player.x - Map[1][0].x < 9250) 
       {Text = 'Reflection: "... but it can only sustain our population up to,..."'};
      if (Player.x - Map[1][0].x > 9250 && Player.x - Map[1][0].x < 9500) 
       {Text = 'Reflection: "... I guess, a couple hundred."'};
      if (Player.x - Map[1][0].x > 9500 && Player.x - Map[1][0].x < 10000) 
       {Text = 'Reflection: "I must return to camp soon, I have a settlement to build."'};
                    };
    if (Level == 6) {if (Player.x <= 400) {Text = "--> Flee the Matrix! -->"};
      if (Player.x - Map[2][0].x > 1000 && Player.x - Map[2][0].x < 2000) 
        {Text = 'Reflection: "I didn\'t fit in with the other chickens on the farm."'};
      if (Player.x - Map[2][0].x > 2000 && Player.x - Map[2][0].x < 3000) 
        {Text = 'Reflection: "Cowering behind the comfort and security provided,..."'};
      if (Player.x - Map[2][0].x > 3000  && Player.x - Map[2][0].x < 4000) 
        {Text = 'Reflection: "... fattening ourselves up for the slaughter."'};
      if (Player.x - Map[2][0].x > 4000 && Player.x - Map[2][0].x < 6000) 
        {Text = 'Reflection: "What happens to the other chickens is no longer my concern."'};
      if (Player.x - Map[2][0].x > 6000 && Player.x - Map[2][0].x < 7000) 
        {Text = 'Reflection: "I\'m in charge of my destiny now."'};
      if (Player.x - Map[2][0].x > 7000 && Player.x - Map[2][0].x < 8000) 
        {Text = 'Reflection: "My destiny is my journey to traverse alone."'};
      if (Player.x - Map[2][0].x > 8000 && Player.x - Map[2][0].x < 9500) 
        {Text = 'Reflection: "And I choose the route to freedom!"'};
      if (Player.x - Map[2][0].x > 9500) 
        {Text = "Press Up to mount the light bike. It\'s your only escape!"}
                    };
    if (Level == 7) 
     {if (Map[2][0].x + 200 < Player.x && t == 0) {t = 1}
      if (Map[2][0].x + 300 < Player.x && t < 2) {t = 2}
      if (Map[2][0].x + 400 < Player.x && t < 3) {t = 3}
      if (Map[2][0].x + 600 < Player.x && t < 4) {t = 4}
      if (Map[2][0].x + 900 < Player.x && t < 5) {t = 5}
      if (Map[2][0].x + 1000 < Player.x && t < 6) {t = 6}
      if (Map[2][0].x + 1200 < Player.x && t < 7) {t = 7}
      if (Map[2][0].x + 1400 < Player.x && t < 8) {t = 8}
      if (Map[2][0].x + 1600 < Player.x && t < 9) {t = 9}
      if (Map[2][0].x + 1800 < Player.x && t < 10) {t = 10}
      if (Map[2][0].x + 1900 < Player.x && t < 10) {t = 11}
      if (Map[2][0].x + 2000 < Player.x && t < 12) {t = 12}
      if (Map[2][0].x + 2200 < Player.x && t < 13) {t = 13}
      if (Map[2][0].x + 2300 < Player.x && t < 14) {t = 14}
      if (Map[2][0].x + 2500 < Player.x && t < 15) {t = 15}
      if (Map[2][0].x + 2600 < Player.x && t < 16) {t = 16}
      if (Map[2][0].x + 2700 < Player.x && t < 17) {t = 17}
      if (Map[2][0].x + 2900 < Player.x && t < 18) {t = 18}
      if (Map[2][0].x + 3200 < Player.x && t < 19) {t = 19}
      if (Map[2][0].x + 3400 < Player.x && t < 20) {t = 20}
      if (Map[2][0].x + 3500 < Player.x && t < 21) {t = 21}
      if (Map[2][0].x + 4000 < Player.x && t < 22) {t = 22}
      if (Map[2][0].x + 4200 < Player.x && t < 23) {t = 23}
      if (Map[2][0].x + 4500 < Player.x && t < 24) {t = 24}
      if (Map[2][0].x + 4800 < Player.x && t < 25) {t = 25}
      if (Map[2][0].x + 5000 < Player.x && t < 26) {t = 26}
      if (Map[2][0].x + 5100 < Player.x && t < 27) {t = 27}
      if (Map[2][0].x + 5200 < Player.x && t < 28) {t = 28}
      if (Map[2][0].x + 5400 < Player.x && t < 29) {t = 29}
      if (Map[2][0].x + 5700 < Player.x && t < 30) {t = 30}
      if (Map[2][0].x + 6000 < Player.x && t < 31) {t = 31}
      if (Map[2][0].x + 6200 < Player.x && t < 32) {t = 32}
      if (Map[2][0].x + 6400 < Player.x && t < 33) {t = 33}
      if (Map[2][0].x + 6600 < Player.x && t < 34) {t = 34}
      if (Map[2][0].x + 6900 < Player.x && t < 35) 
        {Player.Stamina = 0; Player.Active = false; t = 35}
      if (Player.x < Map[4][0].x + 0.5*Map[4][0].width) 
        {Player.Stamina = 0; Player.Active = false; t = 39};

      if (t == 1) {Text = ["You cannot run forever, " + UserName]; 
                   SpeechBox[1].src = "SpeechIcon_Reaper1.gif"    }
      if (t == 2) {Text = ["No prizes for guessing why I'm here"]; 
                   SpeechBox[1].src = "SpeechIcon_Reaper1.gif"    }
      if (t == 3) {Text = ["I had a colourful life, although there are things",
                           "I would've done differently"                       ]; 
                   SpeechBox[1].src = "SpeechIcon_OldChicken1.gif"               }
      if (t == 4) {Text = ["Yes, I can sense the emotional pressure cooker inside you!",
                           "In your final moments, now is the time for catharsis,",       
                           "your soul needs not carry that burden to the afterlife..."  ]; 
                   SpeechBox[1].src = "SpeechIcon_Reaper1.gif"                  } 
      if (t == 5) {Text = ["I SHOULD HAVE SAVED THE OTHERS!"]; 
                   SpeechBox[1].src = "SpeechIcon_OldChicken2.gif"}
      if (t == 6) {Text = ["I was so selfish!",
                           "My self-preservation impulse only served me for so long!"]; 
                   SpeechBox[1].src = "SpeechIcon_OldChicken2.gif"                 }
      if (t == 7) {Text = ["Clinging onto my life like a coward,",
                           "only for old age to ultimately snatch it from me!"]; 
                   SpeechBox[1].src = "SpeechIcon_OldChicken2.gif"              }
      if (t == 8) {Text = ["My brethren never had the opportunity to see",
                           "the beauty of the outside world!"             ]; 
                   SpeechBox[1].src = "SpeechIcon_OldChicken2.gif"          }
      if (t == 9) {Text = ["I have condemned them, and future generations to come,",
                           "to a monotonous existence of slavery!"                  ]; 
                   SpeechBox[1].src = "SpeechIcon_OldChicken2.gif"                    }
      if (t == 10) {Text = ["At least I got to live"]; 
                    SpeechBox[1].src = "SpeechIcon_OldChicken3.gif"}
      if (t == 11) {Text = []}
      if (t == 12) {Text = [UserName + "...",
                            "do you seriously believe that you could have saved them?"]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper2.gif"                         } 
      if (t == 13) {Text = ["..."]; 
                    SpeechBox[1].src = "SpeechIcon_OldChicken3.gif"}  
      if (t == 14) {Text = ["Even if you all made it off the farm, how long would they",
                            "have lasted before a predator would've picked them off?"   ]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper2.gif"                           }
      if (t == 15) {Text = ["At least they would've stood a chance!"]; 
                    SpeechBox[1].src = "SpeechIcon_OldChicken4.gif"   }
      if (t == 16) {Text = ["How much would they have appreciated the opportunity?"]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper3.gif"                      } 
      if (t == 17) {Text = ["They craved the comfort and security readily available,",
                            "munching grain like a crack-cocaine addiction!"          ]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper3.gif"                         }
      if (t == 18) {Text = ["They would've despised you for stripping them off that 'luxury'",
                            "and rightly so! If they decide to squander their right to",
                            "self-determination, that's their decision to make!"              ]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper3.gif"                                 }
      if (t == 19) {Text = ["Only you possessed the strength necessary to survive on the",
                            "outside, " + UserName                                        ]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper2.gif"                             }
      if (t == 20) {Text = ["..."]; SpeechBox[1].src = "SpeechIcon_OldChicken1.gif"}
      if (t == 21) {Text = []}
      if (t == 22) {Text = ["Just know that all you have to do is to turn around and",
                            "touch me, I can end your pain and suffering instantly"   ]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper1.gif"                         }
      if (t == 23) {Text = []}              
      if (t == 24) {Text = ["No? You're gonna juice every drop out of your biological",
                            "clock? You wouldn't go down without a fight, " + UserName + ",",
                            "that's why the farmer hated you so much"                         ]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper2.gif"                                 }
      if (t == 25) {Text = ["The hours of sleep he'd lose at night, thinking about",
                            "\"the one that got away\"!"                            ]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper3.gif"                       }
      if (t == 26) {Text = ["HAHAHAHAHAHAHA!"]; SpeechBox[1].src = "SpeechIcon_OldChicken5.gif"}
      if (t == 27) {Text = ["As long as the man suffers, I can die a happy bird"]; 
                    SpeechBox[1].src = "SpeechIcon_OldChicken5.gif"               }
      if (t == 28) {Text = ["Now, care to tell us your proudest moments of your",
                            "long life (for a chicken anyway)?"                  ]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper1.gif"                    }
      if (t == 29) {Text = ["Travelling the continent, immersing myself into various",
                            "cultures. To finally discover the wonders I was missing",
                            "out on only amplified my disdain for the farmer"                               ]; 
                    SpeechBox[1].src = "SpeechIcon_OldChicken6.gif"                               }
      if (t == 30) {Text = ["To be honest, I received thrills from escaping danger,",
                            "the high stakes of unnecessarily putting myself in harm's way,",
                            "although in hindsight, I was a fool for not running a careful"]; 
                    SpeechBox[1].src = "SpeechIcon_OldChicken6.gif"                          }
      if (t == 31) {Text = ["cost-benefit analysis of the situation.",
                            "I'm glad I ditched it all for tranquility here up north"]; 
                    SpeechBox[1].src = "SpeechIcon_OldChicken6.gif"                    }
      if (t == 32) {Text = ["I couldn't survive the chaos for the past couple of years",
                            "anyway, being a hollow shell of my former self"            ]; 
                    SpeechBox[1].src = "SpeechIcon_OldChicken6.gif"                       }
      if (t == 33) {Text = ["It toughened you up, did it not?",
                            "What made you decide to eventually make the swap?"]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper1.gif"                  }
      if (t == 34) {Text = ["The dopamine and adrenaline hits lost their potency",
                            "over time, which cleared my head enough to realise",
                            "how little I valued my life to gamble it like that"  ]; 
                    SpeechBox[1].src = "SpeechIcon_OldChicken6.gif"                 }
      if (t == 35) {Text = ["*urgh* I can no longer feel my body",
                            "yet I feel chills everywhere"        ]; 
                    SpeechBox[1].src = "SpeechIcon_OldChicken7.gif" }
      if (t == 36) {Text = ["There it is, now it's kicking in..."]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper1.gif"    }
      if (t == 37) {Text = ["Time... to die..."]; 
                    SpeechBox[1].src = "SpeechIcon_OldChicken7.gif"}
      if (t == 38) {Text = []}               
      if (t == 39) {Text = ["May you have a blessed passage to the afterlife"]; 
                    SpeechBox[1].src = "SpeechIcon_Reaper1.gif"                }                                                                                                                                                                                                                                                                                                                                                                                          
     }                                                                                
                     };     
                     
  // Animations                   
  var Temp;

  var ReaperHead = new Image(); ReaperHead.src = "ReaperHead.gif";

  function ImageFlip() {
    if (Level == 1) {
      if (Temp < 100) {Farmer.src = "Farmer1.gif"}
      if (100 <= Temp && Temp < 200) {Farmer.src = "Farmer2.gif"}
      if (200 <= Temp && Temp < 300) {Farmer.src = "Farmer3.gif"}
      if (300 <= Temp && Temp < 400) {Farmer.src = "Farmer4.gif"}
      if (400 <= Temp && Temp < 500) {Farmer.src = "Farmer5.gif"}
      if (500 <= Temp && Temp < 600) {Farmer.src = "Farmer6.gif"}
      if (600 <= Temp && Temp < 700) {Farmer.src = "Farmer7.gif"}
      if (700 <= Temp && Temp < 800) {Farmer.src = "Farmer8.gif"}
      if (800 <= Temp && Temp < 900) {Farmer.src = "Farmer9.gif"}
      if (Temp >= 900) {Farmer.src = "Farmer10.gif"}

      if (Player.Surprised) {FH.src = "FarmerHead5.gif"}
      else {
        if (Temp < 63) {FH.src = "FarmerHead1.gif"}
        if (63 <= Temp && Temp < 125) {FH.src = "FarmerHead1.5.gif"}
        if (125 <= Temp && Temp < 188) {FH.src = "FarmerHead2.gif"}
        if (188 <= Temp && Temp < 250) {FH.src = "FarmerHead2.5.gif"}
        if (250 <= Temp && Temp < 313) {FH.src = "FarmerHead3.gif"}
        if (313 <= Temp && Temp < 375) {FH.src = "FarmerHead2.5.gif"}
        if (375 <= Temp && Temp < 438) {FH.src = "FarmerHead2.gif"}
        if (438 <= Temp && Temp < 500) {FH.src = "FarmerHead1.5.gif"}
        if (500 <= Temp && Temp < 563) {FH.src = "FarmerHead1.gif"}
        if (563 <= Temp && Temp < 625) {FH.src = "FarmerHead1.5.gif"}
        if (625 <= Temp && Temp < 688) {FH.src = "FarmerHead2.gif"}
        if (688 <= Temp && Temp < 750) {FH.src = "FarmerHead2.5.gif"}
        if (750 <= Temp && Temp < 813) {FH.src = "FarmerHead3.gif"}
        if (813 <= Temp && Temp < 875) {FH.src = "FarmerHead2.5.gif"}
        if (875 <= Temp && Temp < 938) {FH.src = "FarmerHead2.gif"}
        if (938 <= Temp) {FH.src = "FarmerHead1.5.gif"}
           }
      
                    };

    if (Level != 4 && Level != 7) {
      if (Player.jump == false) {
      if (keys.right) {
        if (Temp < 63) {Chicken.src = "ChickenR1.gif"}
        if (63 <= Temp && Temp < 125) {Chicken.src = "ChickenR1.5.gif"}
        if (125 <= Temp && Temp < 188) {Chicken.src = "ChickenR2.gif"}
        if (188 <= Temp && Temp < 250) {Chicken.src = "ChickenR2.5.gif"}
        if (250 <= Temp && Temp < 313) {Chicken.src = "ChickenR3.gif"}
        if (313 <= Temp && Temp < 375) {Chicken.src = "ChickenR2.5.gif"}
        if (375 <= Temp && Temp < 438) {Chicken.src = "ChickenR2.gif"}
        if (438 <= Temp && Temp < 500) {Chicken.src = "ChickenR1.5.gif"}
        if (500 <= Temp && Temp < 563) {Chicken.src = "ChickenR1.gif"}
        if (563 <= Temp && Temp < 625) {Chicken.src = "ChickenR1.5.gif"}
        if (625 <= Temp && Temp < 688) {Chicken.src = "ChickenR2.gif"}
        if (688 <= Temp && Temp < 750) {Chicken.src = "ChickenR2.5.gif"}
        if (750 <= Temp && Temp < 813) {Chicken.src = "ChickenR3.gif"}
        if (813 <= Temp && Temp < 875) {Chicken.src = "ChickenR2.5.gif"}
        if (875 <= Temp && Temp < 938) {Chicken.src = "ChickenR2.gif"}
        if (938 <= Temp) {Chicken.src = "ChickenR1.5.gif"}
                      }
      if (keys.left) {
        if (Temp < 63) {Chicken.src = "ChickenL1.gif"}
        if (63 <= Temp && Temp < 125) {Chicken.src = "ChickenL1.5.gif"}
        if (125 <= Temp && Temp < 188) {Chicken.src = "ChickenL2.gif"}
        if (188 <= Temp && Temp < 250) {Chicken.src = "ChickenL2.5.gif"}
        if (250 <= Temp && Temp < 313) {Chicken.src = "ChickenL3.gif"}
        if (313 <= Temp && Temp < 375) {Chicken.src = "ChickenL2.5.gif"}
        if (375 <= Temp && Temp < 438) {Chicken.src = "ChickenL2.gif"}
        if (438 <= Temp && Temp < 500) {Chicken.src = "ChickenL1.5.gif"}
        if (500 <= Temp && Temp < 563) {Chicken.src = "ChickenL1.gif"}
        if (563 <= Temp && Temp < 625) {Chicken.src = "ChickenL1.5.gif"}
        if (625 <= Temp && Temp < 688) {Chicken.src = "ChickenL2.gif"}
        if (688 <= Temp && Temp < 750) {Chicken.src = "ChickenL2.5.gif"}
        if (750 <= Temp && Temp < 813) {Chicken.src = "ChickenL3.gif"}
        if (813 <= Temp && Temp < 875) {Chicken.src = "ChickenL2.5.gif"}
        if (875 <= Temp && Temp < 938) {Chicken.src = "ChickenL2.gif"}
        if (938 <= Temp) {Chicken.src = "ChickenL1.5.gif"}
                     }
                              }
      else {// Default image based on existing image
        if (Chicken.src.includes("R")) 
          {if (Player.y_v > 0) {Chicken.src = "ChickenJR.gif"} else {Chicken.src = "ChickenFR.gif"}}
                                     
        if (Chicken.src.includes("L")) 
          {if (Player.y_v > 0) {Chicken.src = "ChickenJL.gif"} else {Chicken.src = "ChickenFL.gif"}}
        // Key press overrides default image selection, so it appears later in function
        if (keys.right) 
          {if (Player.y_v > 0) {Chicken.src = "ChickenJR.gif"} else {Chicken.src = "ChickenFR.gif"}}
        if (keys.left) 
          {if (Player.y_v > 0) {Chicken.src = "ChickenJL.gif"} else {Chicken.src = "ChickenFL.gif"}}
           }
                                  }

    if (Level == 4) {if (Player.jump) {Chicken.src = "ChickenGlide.gif"}
      else {if (Player.x < Map[1][0].x && Player.x_v > 0) {
              if (Temp < 125) {Chicken.src = "ChickenGlideR1.gif"}
              if (125 <= Temp && Temp < 250) 
              {Chicken.src = "ChickenGlideR2.gif"}
              if (250 <= Temp && Temp < 375) 
              {Chicken.src = "ChickenGlideR3.gif"}
              if (375 <= Temp && Temp < 500) 
              {Chicken.src = "ChickenGlideR2.gif"}
              if (500 <= Temp && Temp < 625) 
              {Chicken.src = "ChickenGlideR1.gif"}
              if (625 <= Temp && Temp < 750) 
              {Chicken.src = "ChickenGlideR2.gif"}
              if (750 <= Temp && Temp < 875) 
              {Chicken.src = "ChickenGlideR3.gif"}
              if (Temp >= 875) {Chicken.src = "ChickenGlideR2.gif"}
                                                          }
            if (Player.x > Map[2][1].x) {
              if (Player.x_v >= 65) {if (Number(String(Temp)[0]) % 2 != 0) 
                    {Chicken.src = "ChickenGlideBr3.gif"} else {Chicken.src = "ChickenGlideBr4.gif"}}
              if (20 <= Player.x_v && Player.x_v < 65) {
                if (Number(String(Temp)[0]) % 2 != 0) 
                {Chicken.src = "ChickenGlideBr1.gif"} else {Chicken.src = "ChickenGlideBr2.gif"}
                                                       }
              if (0.1 <= Player.x_v && Player.x_v < 20) {Chicken.src = "ChickenGlideBr5.gif"}
              if (Player.x_v < 0.1) {Chicken.src = "ChickenGlideV0.gif"}
              if (Player.x_v == 0) {CutsceneL4();
                if (SceneL4 == 1) {if (Number(String(Temp)[0]) % 2 != 0) 
                  {Chicken.src = "ChickenGlideV1.gif"} else {Chicken.src = "ChickenGlideV2.gif"};
                  if (Player.x > Map[7][127].x - 300) {Chicken.src = "ChickenGlideV3.gif"}
                                  }
                if (SceneL4 == 2) {Chicken.src = "ChickenGlideV3.gif"}
                if (2 < SceneL4 && SceneL4 < 8) {Chicken.src = "ChickenGlideV4.gif"}
                if ((8 <= SceneL4 && SceneL4 <= 16) || SceneL4 >= 19) 
                {Chicken.src = "ChickenRear.gif"; if (Gx < 1030) {Gx++}}
                if (SceneL4 == 17 || SceneL4 == 18) {Chicken.src = "ChickenMF.gif"}
                                   }
              if (SceneL4 == 3 || SceneL4 == 7 || SceneL4 == 9 || SceneL4 == 11 || SceneL4 == 18 ||
                  SceneL4 == 20) 
              {if (Number(String(Temp)[0]) % 2 != 0) 
                  {AppImage[127].src = "TruckFLA2.gif"} else {AppImage[127].src = "TruckFLA3.gif"}}
              if (SceneL4 == 5 || SceneL4 == 6 || SceneL4 == 13) 
              {if (Number(String(Temp)[0]) % 2 != 0) 
                  {AppImage[127].src = "TruckFLA2.gif"} else {AppImage[127].src = "TruckFLA4.gif"}}
              if (SceneL4 == 14) {AppImage[127].src = "TruckFLA5.gif"}  
              if (SceneL4 == 15) {if (Number(String(Temp)[0]) % 2 != 0) 
                  {AppImage[127].src = "TruckFLA5.gif"} else {AppImage[127].src = "TruckFLA6.gif"}
                                 }  
              if (SceneL4 == 16) {AppImage[127].src = "TruckFLA5.gif"; Farmer.src = "Eagle2.gif"}  
              if (SceneL4 == 17 || SceneL4 == 19) {AppImage[127].src = "TruckFLA2.gif"}
                                        }
           };
      if (Map[2][0].x + Map[2][0].width < Player.x && Player.x < Map[2][1].x && 
      Player.y > Map[1][0].y - 110)              { 
        if (Number(String(Temp)[0]) % 2 != 0) {Chicken.src = "ChickenGlideS1.gif"}
        else {Chicken.src = "ChickenGlideS2.gif"}};

      if (Player.x < Map[1][0].x) {AppImage[0].src = "SharkL.gif"}
      if (Map[2][1].x < Player.x) {AppImage[0].src = "SharkR.gif"}
      if (Map[2][0].x + Map[2][0].width < Player.x && Player.x < Map[2][1].x) {
        if (Map[7][0].mode == 2 || Map[7][0].mode == 3) {AppImage[0].src = "Shark3.gif"}
        else {if (Number(String(Temp)[0]) % 2 != 0) {AppImage[0].src = "Shark1.gif"}
              else {AppImage[0].src = "Shark2.gif"}
             }                                                                } 

      if (Icon[0].src.includes("Click")) {
        if (Number(String(Temp)[0]) % 2 != 0) {Icon[0].src = "Icon_Click1.gif"}
        else {Icon[0].src = "Icon_Click2.gif"}
                                         }     
                    }

    if (Level == 7) {
      if (Player.jump == false) {
      if (keys.right) {
        if (Temp < 125) {Chicken.src = "OldChickenR1.gif"}
        if (125 <= Temp && Temp < 250) {Chicken.src="OldChickenR2.gif"}
        if (250 <= Temp && Temp < 375) {Chicken.src="OldChickenR3.gif"}
        if (375 <= Temp && Temp < 500) {Chicken.src="OldChickenR2.gif"}
        if (500 <= Temp && Temp < 625) {Chicken.src="OldChickenR1.gif"}
        if (625 <= Temp && Temp < 750) {Chicken.src="OldChickenR2.gif"}
        if (750 <= Temp && Temp < 875) {Chicken.src="OldChickenR3.gif"}
        if (Temp >= 875) {Chicken.src = "OldChickenR2.gif"}
                      }
      if (keys.left) {
        if (Temp < 125) {Chicken.src = "OldChickenL1.gif"}
        if (125 <= Temp && Temp < 250) {Chicken.src="OldChickenL2.gif"}
        if (250 <= Temp && Temp < 375) {Chicken.src="OldChickenL3.gif"}
        if (375 <= Temp && Temp < 500) {Chicken.src="OldChickenL2.gif"}
        if (500 <= Temp && Temp < 625) {Chicken.src="OldChickenL1.gif"}
        if (625 <= Temp && Temp < 750) {Chicken.src="OldChickenL2.gif"}
        if (750 <= Temp && Temp < 875) {Chicken.src="OldChickenL3.gif"}
        if (Temp >= 875) {Chicken.src = "OldChickenL2.gif"}
                     }
                              }
      else {// Default image based on existing image
        if (Chicken.src.includes("R")) 
          {if (Player.y_v > 0) {Chicken.src = "OldChickenJR.gif"} 
           else {Chicken.src = "OldChickenFR.gif"}               }
                                     
        if (Chicken.src.includes("L")) 
          {if (Player.y_v > 0) {Chicken.src = "OldChickenJL.gif"} 
           else {Chicken.src = "OldChickenFL.gif"}               }
        // Key press overrides default image selection, so it appears later in function
        if (keys.right) 
          {if (Player.y_v > 0) {Chicken.src = "OldChickenJR.gif"} 
           else {Chicken.src = "OldChickenFR.gif"}               }
        if (keys.left) 
          {if (Player.y_v > 0) {Chicken.src = "OldChickenJL.gif"} 
           else {Chicken.src = "OldChickenFL.gif"}               }
           }

      if (t == 35) {Chicken.src = "OldChickenD1.gif"; setTimeout(() => {t = 36}, 3000)}
      if (t == 36) {setTimeout(() => {t = 37}, 3000)}
      if (t == 37) {setTimeout(() => {t = 38}, 3000);
        setTimeout(() => {Chicken.src = "OldChickenD2.gif";
          setTimeout(() => {Chicken.src = "OldChickenD3.gif";
             setTimeout(() => {Chicken.src = "OldChickenD4.gif";
               setTimeout(() => {Chicken.src = "OldChickenD5.gif"}, 250)
                   }, 250)}, 250)}, 1000)} 
      if (t == 38) {setTimeout(() => {t = 39}, 5000)}

      if (Player.x < Map[4][0].x + 0.5*Map[4][0].width) {Chicken.src = "OldChickenD6.gif"};

      Ghost.x = Player.x; 
      if ((Chicken.src.includes("D5") || Chicken.src.includes("D6")) && Ghost.y > - 110) 
        {Ghost.y -= 500/(Ghost.y + 100)} else {if (Ghost.y > - 110) {Ghost.y = Player.y}}
                    };                

    if (Level == 1) {for (let d = 0; d < 3; d++) {
        if (Map[5][d].x_v > 0) {
          if (Temp < 250) {DuckImage[d].src = "DuckR1.gif"}
          if (250<=Temp&&Temp<500) {DuckImage[d].src="DuckR2.gif"}
          if (500<=Temp&&Temp<750) {DuckImage[d].src="DuckR3.gif"}
          if (Temp >= 750) {DuckImage[d].src = "DuckR2.gif"}
                             };
        if (Map[5][d].x_v < 0) {
          if (Temp < 250) {DuckImage[d].src = "DuckL1.gif"}
          if (250<=Temp&&Temp<500) {DuckImage[d].src="DuckL2.gif"}
          if (500<=Temp&&Temp<750) {DuckImage[d].src="DuckL3.gif"}
          if (Temp >= 750) {DuckImage[d].src = "DuckL2.gif"}
                               }                 }
                    };
    if (Level == 1 || Level == 4) {let P = Map[6].length;                
      for (let p = 0; p < P; p++) {
        if (Temp < 125) {PigeonImage[p].src = "Pigeon1.gif"}
        if (125<=Temp&&Temp<250){PigeonImage[p].src="Pigeon2.gif"}
        if (250<=Temp&&Temp<375){PigeonImage[p].src="Pigeon3.gif"}
        if (375<=Temp&&Temp<500){PigeonImage[p].src="Pigeon4.gif"}
        if (500<=Temp&&Temp<625){PigeonImage[p].src="Pigeon5.gif"}
        if (625<=Temp&&Temp<750){PigeonImage[p].src="Pigeon4.gif"}
        if (750<=Temp&&Temp<875){PigeonImage[p].src="Pigeon3.gif"}
        if (Temp >= 875) {PigeonImage[p].src = "Pigeon2.gif"}
                                  }   
                                  };                                    
    
    if (Level == 2) {for (let d = 0; d < 2; d++) {
        if (Map[5][d].width < 30 && Map[5][d].x_v > 0) {DuckImage[d].src = "RatR.gif"};
        if (Map[5][d].width < 30 && Map[5][d].x_v < 0) {DuckImage[d].src = "RatL.gif"};
        if (Map[5][d].width > 30 && Map[5][d].x_v > 0) {DuckImage[d].src = "FishR.gif"};
        if (Map[5][d].width > 30 && Map[5][d].x_v < 0) {DuckImage[d].src = "FishL.gif"}
                                                 };
      for (let p = 0; p < 2; p++) {
        if (Temp < 125) {PigeonImage[p].src = "Bat1.gif"}
        if (125<=Temp&&Temp<250) {PigeonImage[p].src="Bat2.gif"}
        if (250<=Temp&&Temp<375) {PigeonImage[p].src="Bat1.gif"}
        if (375<=Temp&&Temp<500) {PigeonImage[p].src="Bat2.gif"}
        if (500<=Temp&&Temp<625) {PigeonImage[p].src="Bat1.gif"}
        if (625<=Temp&&Temp<750) {PigeonImage[p].src="Bat2.gif"}
        if (750<=Temp&&Temp<875) {PigeonImage[p].src="Bat1.gif"}
        if (Temp >= 875) {PigeonImage[p].src = "Bat2.gif"}
                                  }
                    };
    if (Level == 3) {Farmer.src = "Crosshairs.gif"}
    if (Level == 4 && Player.Active) {Farmer.src = "Eagle1.gif"}
    if (Level == 6) {Farmer.src = "Matrix.gif"} 

    if (Level == 7) {
      if (Number.isInteger((Number(Minute[Minute.length-1]) + 2) / 2)) {
        if (Temp < 100) {Farmer.src = "Reaper1.gif"}
        if (100 <= Temp && Temp < 200) {Farmer.src="Reaper2.gif"}
        if (200 <= Temp && Temp < 300) {Farmer.src="Reaper3.gif"}
        if (300 <= Temp && Temp < 400) {Farmer.src="Reaper4.gif"}
        if (400 <= Temp && Temp < 500) {Farmer.src="Reaper5.gif"}
        if (500 <= Temp && Temp < 600) {Farmer.src="Reaper6.gif"}
        if (600 <= Temp && Temp < 700) {Farmer.src="Reaper7.gif"}
        if (700 <= Temp && Temp < 800) {Farmer.src="Reaper8.gif"}
        if (800 <= Temp && Temp < 900) {Farmer.src="Reaper9.gif"}
        if (900 <= Temp) {Farmer.src = "Reaper10.gif"}
                                                                       }
      else {
        if (Temp < 100) {Farmer.src = "Reaper10.gif"}
        if (100 <= Temp && Temp < 200) {Farmer.src="Reaper9.gif"}
        if (200 <= Temp && Temp < 300) {Farmer.src="Reaper8.gif"}
        if (300 <= Temp && Temp < 400) {Farmer.src="Reaper7.gif"}
        if (400 <= Temp && Temp < 500) {Farmer.src="Reaper6.gif"}
        if (500 <= Temp && Temp < 600) {Farmer.src="Reaper5.gif"}
        if (600 <= Temp && Temp < 700) {Farmer.src="Reaper4.gif"}
        if (700 <= Temp && Temp < 800) {Farmer.src="Reaper3.gif"}
        if (800 <= Temp && Temp < 900) {Farmer.src="Reaper2.gif"}
        if (900 <= Temp) {Farmer.src = "Reaper1.gif"}
           };

      if (Temp < 875) {AppImage[2].src = "Lamppost1.gif";
        AppImage[4].src = "Lamppost1.gif"; AppImage[5].src = "Lamppost1.gif";
        AppImage[8].src = "Lamppost1.gif"; AppImage[9].src = "Lamppost1.gif";
        AppImage[10].src = "Lamppost1.gif"
                                        } else {AppImage[2].src = "Lamppost2.gif";
        AppImage[4].src = "Lamppost2.gif"; AppImage[5].src = "Lamppost2.gif";
        AppImage[8].src = "Lamppost2.gif"; AppImage[9].src = "Lamppost2.gif";
        AppImage[10].src = "Lamppost2.gif"     };

      if (Temp < 250) {AppImage[3].src = "Bar1.jpg"}
      if (250<=Temp&&Temp<500) {AppImage[3].src = "Bar2.jpg"}
      if (500<=Temp&&Temp<750) {AppImage[3].src = "Bar3.jpg"}
      if (Temp >= 750) {AppImage[3].src = "Bar4.jpg"};

      if (Temp < 100) {AppImage[11].src = "Salon1.jpg"}
      if (100<=Temp&&Temp<200) {AppImage[11].src = "Salon2.jpg"}
      if (200<=Temp&&Temp<300) {AppImage[11].src = "Salon3.jpg"}
      if (300<=Temp&&Temp<400) {AppImage[11].src = "Salon4.jpg"}
      if (400<=Temp&&Temp<500) {AppImage[11].src = "Salon5.jpg"}
      if (500<=Temp&&Temp<600) {AppImage[11].src = "Salon6.jpg"}
      if (600<=Temp&&Temp<700) {AppImage[11].src = "Salon7.jpg"}
      if (700<=Temp&&Temp<800) {AppImage[11].src = "Salon8.jpg"}
      if (800<=Temp&&Temp<900) {AppImage[11].src = "Salon7.jpg"}
      if (Temp >= 900) {AppImage[11].src = "Salon8.jpg"};
                    }                                  
                       };


  const Ghost = {x: 0, y: 0, width: 100, height: 100};
  const GhostApp = new Image(); GhostApp.src = "ChickenSpirit.gif";
                                        
  function RenderGhost() {ctx.globalAlpha = 0.25;
    ctx.drawImage(GhostApp, Ghost.x, Ghost.y, Ghost.width, Ghost.height);
    ctx.globalAlpha = 1  };                                       
  
  var Game = "Off";

  var Screen = new Image();
  var Menu_Hill = new Image(); Menu_Hill.src = "Menu_Hill.gif"; var MHx = 1000;
  var Logo = new Image(); Logo.src = "Logo1.gif";
  var Label = new Image(); Label.src = "Label.gif";
  var Clouds = new Image(); Clouds.src = "BackgroundL2-0.gif"; var Clouds_x = -4976;
  var Menu_Road = new Image(); Menu_Road.src = "Menu_Road.jpg";

  var MFI = [];
  for (let f = 0; f < 12; f++) {MFI.push(new Image()); MFI[f].src = "Menu_Fence.gif"};
  var MFx = [];
  for (let f = 0; f < 12; f++) {MFx.push(100*f)}; 
  
  var MRmI = [];
  for (let r = 0; r < 4; r++) {MRmI.push(new Image()); MRmI[r].src = "Menu_Roadmark.gif"};
  var MRmx = []; for (let r = 0; r < 4; r++) {MRmx.push(300*r)};

  var Truck = new Image(); var Truck_x = -3000;

  var FH = new Image(); FH.src = "FarmerHead1.gif";

  var Chicken_x = 800; var Dash = false;

  var Minute; var MINUTE; var Phase;

  function Scene() {
    if (Game == "Off") {Screen.src = "BackgroundL1-0.jpg";

      if (Temp < 100) {Farmer.src = "Farmer1.gif"}
      if (100<=Temp&&Temp<200) {Farmer.src = "Farmer2.gif"}
      if (200<=Temp&&Temp<300) {Farmer.src = "Farmer3.gif"}
      if (300<=Temp&&Temp<400) {Farmer.src = "Farmer4.gif"}
      if (400<=Temp&&Temp<500) {Farmer.src = "Farmer5.gif"}
      if (500<=Temp&&Temp<600) {Farmer.src = "Farmer6.gif"}
      if (600<=Temp&&Temp<700) {Farmer.src = "Farmer7.gif"}
      if (700<=Temp&&Temp<800) {Farmer.src = "Farmer8.gif"}
      if (800<=Temp&&Temp<900) {Farmer.src = "Farmer9.gif"}
      if (Temp >= 900) {Farmer.src = "Farmer10.gif"};

      if (400 <= Temp && Temp < 500) {Truck.src = "Truck1.gif"}
      if (Temp >= 900) {Truck.src = "Truck1.gif"}
      else {Truck.src = "Truck2.gif"};
      if (Truck_x < 2000) {Truck_x += 5} else {Truck_x -= 5000};

      if (Dash) {FH.src = "FarmerHead4.gif";
        if (Temp < 1000/32) {Chicken.src = "ChickenS1.gif"}
        if (1000/32<=Temp&&Temp<2000/32) {Chicken.src="ChickenS1.5.gif"}
        if (2000/32<=Temp&&Temp<3000/32) {Chicken.src="ChickenS2.gif"}
        if (3000/32<=Temp&&Temp<4000/32) {Chicken.src="ChickenS2.5.gif"}
        if (4000/32<=Temp&&Temp<5000/32) {Chicken.src="ChickenS3.gif"}
        if (5000/32<=Temp&&Temp<6000/32) {Chicken.src="ChickenS2.5.gif"}
        if (6000/32<=Temp&&Temp<7000/32) {Chicken.src="ChickenS2.gif"}
        if (7000/32<=Temp&&Temp<8000/32) {Chicken.src="ChickenS1.5.gif"}
        if (8000/32<=Temp&&Temp<9000/32) {Chicken.src="ChickenS1.gif"}
        if (9000/32<=Temp&&Temp<10000/32) {Chicken.src="ChickenS1.5.gif"}
        if (10000/32<=Temp&&Temp<11000/32) {Chicken.src="ChickenS2.gif"}
        if (11000/32<=Temp&&Temp<12000/32) {Chicken.src="ChickenS2.5.gif"}
        if (12000/32<=Temp&&Temp<13000/32) {Chicken.src="ChickenS3.gif"}
        if (13000/32<=Temp&&Temp<14000/32) {Chicken.src="ChickenS2.5.gif"}
        if (14000/32<=Temp&&Temp<15000/32) {Chicken.src="ChickenS2.gif"}
        if (15000/16<=Temp&&Temp<16000/16) {Chicken.src="ChickenS1.5.gif"}
        if (16000/16<=Temp&&Temp<17000/16) {Chicken.src="ChickenS1.gif"}
        if (17000/32<=Temp&&Temp<18000/32) {Chicken.src="ChickenS1.5.gif"}
        if (18000/32<=Temp&&Temp<19000/32) {Chicken.src="ChickenS2.gif"}
        if (19000/32<=Temp&&Temp<20000/32) {Chicken.src="ChickenS2.5.gif"}
        if (20000/32<=Temp&&Temp<21000/32) {Chicken.src="ChickenS3.gif"}
        if (21000/32<=Temp&&Temp<22000/32) {Chicken.src="ChickenS2.5.gif"}
        if (22000/32<=Temp&&Temp<23000/32) {Chicken.src="ChickenS2.gif"}
        if (23000/32<=Temp&&Temp<24000/32) {Chicken.src="ChickenS1.5.gif"}
        if (24000/32<=Temp&&Temp<25000/32) {Chicken.src="ChickenS1.gif"}
        if (25000/32<=Temp&&Temp<26000/32) {Chicken.src="ChickenS1.5.gif"}
        if (26000/32<=Temp&&Temp<27000/32) {Chicken.src="ChickenS2.gif"}
        if (27000/32<=Temp&&Temp<28000/32) {Chicken.src="ChickenS2.5.gif"}
        if (28000/32<=Temp&&Temp<29000/32) {Chicken.src="ChickenS3.gif"}
        if (29000/32<=Temp&&Temp<30000/32) {Chicken.src="ChickenS2.5.gif"}
        if (30000/32<=Temp&&Temp<31000/32) {Chicken.src="ChickenS2.gif"}
        if (31000/32 <= Temp) {Chicken.src="ChickenS1.5.gif"}
                }
      else {
        if (Temp < 63) {Chicken.src = "ChickenR1.gif"; FH.src = "FarmerHead1.gif"}
        if (63 <= Temp && Temp < 125) {Chicken.src = "ChickenR1.5.gif"; FH.src = "FarmerHead1.5.gif"}
        if (125<=Temp && Temp<188) {Chicken.src = "ChickenR2.gif"; FH.src = "FarmerHead2.gif"}
        if (188<=Temp && Temp<250) {Chicken.src = "ChickenR2.5.gif"; FH.src = "FarmerHead2.5.gif"}
        if (250<=Temp && Temp<313) {Chicken.src = "ChickenR3.gif"; FH.src = "FarmerHead3.gif"}
        if (313<=Temp && Temp<375) {Chicken.src = "ChickenR2.5.gif"; FH.src = "FarmerHead2.5.gif"}
        if (375<=Temp && Temp<438) {Chicken.src = "ChickenR2.gif"; FH.src = "FarmerHead2.gif"}
        if (438<=Temp && Temp<500) {Chicken.src = "ChickenR1.5.gif"; FH.src = "FarmerHead1.5.gif"}
        if (500<=Temp && Temp<563) {Chicken.src = "ChickenR1.gif"; FH.src = "FarmerHead1.gif"}
        if (563<=Temp && Temp<625) {Chicken.src = "ChickenR1.5.gif"; FH.src = "FarmerHead1.5.gif"}
        if (625<=Temp && Temp<688) {Chicken.src = "ChickenR2.gif"; FH.src = "FarmerHead2.gif"}
        if (688<=Temp && Temp<750) {Chicken.src = "ChickenR2.5.gif"; FH.src = "FarmerHead2.5.gif"}
        if (750<=Temp && Temp<813) {Chicken.src = "ChickenR3.gif"; FH.src = "FarmerHead3.gif"}
        if (813<=Temp && Temp<875) {Chicken.src = "ChickenR2.5.gif"; FH.src = "FarmerHead2.5.gif"}
        if (875<=Temp && Temp<938) {Chicken.src = "ChickenR2.gif"; FH.src = "FarmerHead2.gif"}
        if (938 <= Temp) {Chicken.src = "ChickenR1.5.gif"; FH.src = "FarmerHead1.5.gif"}
           };

      if (Minute[Minute.length-1] == "0") {     
        if (Temp < 50) {Logo.src = "Logo1.gif"}
        if (50<=Temp&&Temp<100) {Logo.src = "Logo2.gif"}
        if (100<=Temp&&Temp<150) {Logo.src = "Logo3.gif"} 
        if (150<=Temp&&Temp<200) {Logo.src = "Logo4.gif"}   
        if (200<=Temp&&Temp<250) {Logo.src = "Logo5.gif"} 
        if (250<=Temp&&Temp<300) {Logo.src = "Logo6.gif"}
        if (300<=Temp&&Temp<350) {Logo.src = "Logo7.gif"}
        if (350<=Temp&&Temp<400) {Logo.src = "Logo8.gif"}
        if (400<=Temp&&Temp<450) {Logo.src = "Logo9.gif"}
        if (450<=Temp&&Temp<500) {Logo.src = "Logo10.gif"}
        if (500<=Temp&&Temp<550) {Logo.src = "Logo11.gif"}
        if (550<=Temp&&Temp<600) {Logo.src = "Logo12.gif"}
        if (600<=Temp&&Temp<650) {Logo.src = "Logo13.gif"}
        if (650<=Temp&&Temp<700) {Logo.src = "Logo14.gif"}
        if (700<=Temp&&Temp<750) {Logo.src = "Logo15.gif"}
        if (750<=Temp&&Temp<800) {Logo.src = "Logo16.gif"}
        if (Temp >= 800) {Logo.src = "Logo1.gif"}
                                          };

      ctx.drawImage(Screen, 0, 0, canvas.width, canvas.height);
      ctx.drawImage(Clouds, Clouds_x, 0, 6000, 576);
      ctx.drawImage(Menu_Hill, MHx, 0, 1024, 576);
      ctx.drawImage(Menu_Road, 0, 326, 1024, 250);
      for (let f = 0; f < 12; f++) {MFx[f] -= 3; if (MFx[f] <= -100) {MFx[f] += 1200};
                                    ctx.drawImage(MFI[f], MFx[f], 240, 100, 100)      };
      for (let r = 0; r < 4; r++) {MRmx[r] -= 5; if (MRmx[r] <= -100) {MRmx[r] += 1200};
                                   ctx.drawImage(MRmI[r], MRmx[r], 475, 300, 30)        };
      ctx.drawImage(Truck, Truck_x, 0, 1050, 450);                             
      ctx.drawImage(Farmer, 0, 50, 500, 500); ctx.drawImage(FH, 110, 50, 230, 250);
      ctx.drawImage(Chicken, Chicken_x, 330, 200, 200); 

      if (Number(Minute[Minute.length-1]) < 5) 
        {Phase = (Number(Minute[Minute.length-1]) / 10) + (Temp / 10000)}
      else {Phase = (10-Number(Minute[Minute.length-1])-(Temp/1000))/10};
      ctx.globalAlpha = Phase;
      ctx.font = "30px Arial"; ctx.fillStyle = "aqua";
      ctx.fillText("Version Date: 11 Apr 2024", 310, 550); ctx.globalAlpha = 1;

      ctx.drawImage(Logo, 150-400*(Temp/5000), 10-35*(Temp/5000), 800*(1+(Temp-500)/5000), 70*(1+(Temp-500)/5000));
      ctx.translate(512, 110);
      ctx.rotate((Phase-0.25)*Math.PI/2);
      ctx.drawImage(Label, -242, -31, 484, 62);
      ctx.rotate((0.25-Phase)*Math.PI/2);
      ctx.translate(-512, -110);

      if (Clouds_x < -1976) {Clouds_x++} else {Clouds_x -= 3000};
      if (MHx > -1200) {MHx -= 0.5} else {MHx += 2200};

      if (Chicken_x == 800) {Dash = false} if (Chicken_x == 350) {Dash = true};
      if (Dash) {Chicken_x += 5} else {Chicken_x--};

      Spawn = []; Ground = []; Platform = []; Obstacle = []; Duck = []; Pigeon = []; 
      Water = []; Apparition = []; Predator = []; MapSpec = []; Map = [];

      if (MINUTE < 10) {
        HexR = Math.round(250).toString(16); 
        HexG = Math.round(25*MINUTE).toString(16); 
        HexB = Math.round(0).toString(16)
                       }
      if (10 <= MINUTE && MINUTE < 20) {
        HexR = Math.round(250 - 25*(MINUTE - 10)).toString(16); 
        HexG = Math.round(250).toString(16); 
        HexB = Math.round(0).toString(16)
                                       }
      if (20 <= MINUTE && MINUTE < 30) {
        HexR = Math.round(0).toString(16); 
        HexG = Math.round(250).toString(16); 
        HexB = Math.round(25*(MINUTE - 20)).toString(16)
                                       } 
      if (30 <= MINUTE && MINUTE < 40) {
        HexR = Math.round(0).toString(16); 
        HexG = Math.round(250 - 25*(MINUTE - 30)).toString(16); 
        HexB = Math.round(250).toString(16)
                                       }
      if (40 <= MINUTE && MINUTE < 50) {
        HexR = Math.round(25*(MINUTE - 40)).toString(16); 
        HexG = Math.round(0).toString(16); 
        HexB = Math.round(250).toString(16)
                                       }
      if (50 <= MINUTE && MINUTE < 60) {
        HexR = Math.round(250).toString(16); 
        HexG = Math.round(0).toString(16); 
        HexB = Math.round(250 - 25*(MINUTE - 50)).toString(16)
                                       };
      if (HexR.length == 1) {HexR = "0" + HexR}
      if (HexG.length == 1) {HexG = "0" + HexG}
      if (HexB.length == 1) {HexB = "0" + HexB};                                                                                                                                                                                                                                                             
      HexT = "#" + HexR + HexG + HexB;

      setTimeout(() => {ctx.fillStyle = HexT;
        ctx.fillText("Click here to play", 380, 300);
        canvas.onclick = () => {if (Game == "Off") {
            Level = 1; LevelLoad(); Map = JSON.parse(JSON.stringify(MapSpec)); 
            x_b = JSON.parse(JSON.stringify(X_b1)); y_b = JSON.parse(JSON.stringify(Y_b1)); 
            Player.x = Map[0].x; Player.y = Map[0].y; Player.Lives = 5; Player.Stamina = 5;
            Player.width = 20; Player.height = 20; Player.Active = true; ReverseT = 1000;
            Game = "On"                            }     
                               }
                       }, 3000)};

    if (Level == 1 && Player.Lives < 0) {Game = "Over"; // Oh no! <;-(
      ctx.clearRect(0, 0, canvas.width, canvas.height); canvas.onclick = [];
      Screen.src = "GameOver1.jpg";
      ctx.drawImage(Screen, 0, 0, canvas.width, canvas.height);
      setTimeout(function() {ctx.font = "30px Arial"; ctx.fillStyle = "white";
        ctx.fillText("Click to return to menu", 360, 300);
        canvas.onclick = function() {Level = 0; Game = "Off"; UserName = prompt("Name your avatar")}
                            }, 3000)    };

    if (Level == 3 && Player.Lives < 0) {Game = "Over"; // Goodness gracious! <;-(
      ctx.clearRect(0, 0, canvas.width, canvas.height); canvas.onclick = [];
      Screen.src = "GameOver4.jpg";
      ctx.drawImage(Screen, 0, 0, canvas.width, canvas.height);
      setTimeout(function() {ctx.font = "30px Arial"; ctx.fillStyle = "white";
        ctx.fillText("Click to return to menu", 360, 300);
        canvas.onclick = function() {Level = 0; Game = "Off"; UserName = prompt("Name your avatar")}
                            }, 3000)};                    

    if (Level == 4 && Player.Lives < 0) {Game = "Over"; // Oh no! <;-(
      ctx.clearRect(0, 0, canvas.width, canvas.height); canvas.onclick = [];
      Pigeon = [];
      Screen.src = "GameOver2.jpg";
      ctx.drawImage(Screen, 0, 0, canvas.width, canvas.height);
      setTimeout(function() {ctx.font = "30px Arial"; ctx.fillStyle = "turquoise";
        ctx.fillText("Click to return to menu", 360, 300);
        canvas.onclick = function() {Level = 0; Game = "Off"; UserName = prompt("Name your avatar")}
                            }, 3000)};                                              
                            
    if (Level == 6 && Player.Lives < 0) {Game = "Over"; // Oh yes, the farm's where you belong >:-D
      ctx.clearRect(0, 0, canvas.width, canvas.height); canvas.onclick = [];
      Screen.src = "GameOver3.jpg";
      ctx.drawImage(Screen, 0, 0, canvas.width, canvas.height);
      setTimeout(function() {ctx.font = "30px Arial"; ctx.fillStyle = "pink";
        ctx.fillText("Click to return to menu", 360, 300);
        canvas.onclick = function() {Level = 0; Game = "Off"; UserName = prompt("Name your avatar")}
                            }, 3000)};                        
    
    if (Level == 4 && SceneL4 == 57) {Game = "Over"; // To be continued, not anytime soon though...
      ctx.clearRect(0, 0, canvas.width, canvas.height); canvas.onclick = [];
      Screen.src = "ToBeContinued.jpg";
      ctx.drawImage(Screen, 0, 0, canvas.width, canvas.height);
      setTimeout(function() {ctx.font = "30px Arial"; ctx.fillStyle = "black";
        ctx.fillText("Click to return to menu", 360, 300);
        canvas.onclick = function() {Level = 0; Game = "Off"; UserName = prompt("Name your avatar")}
                            }, 3000) };                        

    if (Level == 5) {
      if (Player.x - Map[1][0].x > 9900) {Game = "Over"; // Thanks for playing
      ctx.clearRect(0, 0, canvas.width, canvas.height); canvas.onclick = [];
      Screen.src = "Ending2.jpg";
      ctx.drawImage(Screen, 0, 0, canvas.width, canvas.height);
      setTimeout(function() {ctx.font = "30px Arial"; ctx.fillStyle = "lime";
        ctx.fillText("Click to return to menu", 360, 300);
        canvas.onclick = function() {Level = 0; Game = "Off"; UserName = prompt("Name your avatar")}
                            }, 3000)     }  
                    };
                    
    if (Level == 6 && Game == "Over" && Player.Lives > 0) { // Tron style!
      ctx.clearRect(0, 0, canvas.width, canvas.height); canvas.onclick = [];
      Screen.src = "Ending3.jpg";
      ctx.drawImage(Screen, 0, 0, canvas.width, canvas.height);
      setTimeout(function() {ctx.font = "30px Arial"; ctx.fillStyle = "pink";
        ctx.fillText("Click to return to menu", 360, 300);
        canvas.onclick = function() {Level = 0; Game = "Off"; UserName = prompt("Name your avatar")}
                              }, 3000)                    };
                              
    if (Level == 7 && Ghost.y <= -100) {Game = "Over"; // Thanks for playing
      ctx.clearRect(0, 0, canvas.width, canvas.height); canvas.onclick = [];
      Screen.src = "Ending1.jpg";
      ctx.drawImage(Screen, 0, 0, canvas.width, canvas.height);
      setTimeout(() => {ctx.font = "30px Arial"; ctx.fillStyle = "white";
        ctx.fillText("Click to return to menu", 360, 300); Ghost.y = 456;
        canvas.onclick = function() {Level = 0; Game = "Off"; UserName = prompt("Name your avatar")}
                       }, 3000)};                               
                          };  
  
  // A picture paints a thousand words                        
  const Icon = [new Image(), new Image()]; Icon[0].src = "Stamina.gif"; Icon[1].src = "Lives.gif";

  const Clock = new Image(); Clock.src = "Clock.gif";
  
  function Proximity() {// When the player is close to capture
    if (((Level == 1 || Level == 4 || Level == 6 || Level == 7) && Player.x - Map[8][0].x < 500) &&
        Player.Active) 
      {Player.Surprised = true} else {Player.Surprised = false}
                       };

  var FreezeFrame = new Image(); FreezeFrame.src = "FreezeFrame1.gif"

  function RenderPause() {
    if (Temp < 125) {FreezeFrame.src = "FreezeFrame1.gif"}
    if (125<=Temp&&Temp<250) {FreezeFrame.src="FreezeFrame2.gif"}
    if (250<=Temp&&Temp<375) {FreezeFrame.src="FreezeFrame3.gif"}
    if (375<=Temp&&Temp<500) {FreezeFrame.src="FreezeFrame2.gif"}
    if (500<=Temp&&Temp<625) {FreezeFrame.src="FreezeFrame1.gif"}
    if (625<=Temp&&Temp<750) {FreezeFrame.src="FreezeFrame2.gif"}
    if (750<=Temp&&Temp<875) {FreezeFrame.src="FreezeFrame3.gif"}
    if (Temp >= 875) {FreezeFrame.src="FreezeFrame2.gif"}

    ctx.globalAlpha = 0.75;
    ctx.drawImage(FreezeFrame, 0, 0, 1024, 576);
    ctx.globalAlpha = 1
                         };
                         
  var Distance;                        

  function loop() {Temp = new Date().getMilliseconds(); // Required for animation frame switching
    if (Game == "Off" || Level == 7) {Minute = new Date().getSeconds().toString();
                                      MINUTE = new Date().getSeconds() + Temp/1000};
    if (UserName == null) {UserName = prompt("I'm not going away until you name me!")};
    if (UserName.length == 0) {UserName = prompt("No name? Enter a name damnit!")};
    if (UserName.length > 20) {UserName = prompt("Too long, enter a shorter name!")};
    

    if (Game == "On") {
      if (keys.pause == false) {
        ImageLoad(); ImageFlip(); if (Level != 7) {MobMotion()};
        if (Level != 4) {PlayerMotion()} else {Glide(); Snatch()}; 
        ScrollConditions(); ScrollFunction(); Collision();              
      
        if (Player.Active == false) {keys.left = false; keys.right = false};
    
        if (Level == 1 || Level == 4 || Level == 6 || Level == 7) {Sweep()};
                               };

      if (Level != 3 && Level != 7) {Reverse()};                         

      // Rendering the canvas, the player, the platforms and the obstacles
      BackgroundLoad(); ForegroundLoad(); RenderCanvas(); 
      if (Level != 3) {RenderMap(); 
        if (Level == 7) {
          if (Number(Minute[Minute.length-1]) < 5) 
            {ctx.globalAlpha=(Number(Minute[Minute.length-1])/10)+(Temp/10000)}
          else {ctx.globalAlpha=(10-Number(Minute[Minute.length-1])-(Temp/1000))/10};
          ctx.drawImage(ReaperHead, Map[4][0].x + 332, 104, 59, 115); ctx.globalAlpha = 1};
        if (Level == 7 && (Chicken.src.includes("D5") || Chicken.src.includes("D6"))) 
          {RenderGhost()}; 
        RenderPlayer()}
      else {RenderPlayer(); RenderMap()}
      if (Level == 4) {RenderFore()}; 
                             
    
      // Gamestate
      if (Level == 1 || Level == 3 || Level == 4 || Level == 6) {Death()};

      // Updating canvas messages
      Message(); if (Level == 1 || Level == 4 || Level == 6) {Proximity()};

      // Displaying the stamina and lives
      if (Level != 4) {Icon[0].src = "Stamina.gif"; ctx.drawImage(Icon[0], 10, 10, 100, 60)}
      else {if (Player.Active) {Icon[0].src = "EagleHead.gif";
             ctx.drawImage(Icon[0], 350 - (Player.x - Map[8][0].x)/100, 0, 128, 94)
                               }
            else {if (SceneL4 > 0) {ctx.drawImage(Icon[0], 900, 220, 100, 100)}}
           };
      ctx.drawImage(Icon[1], 450, 10, 60, 60);
      if (Level == 3) {ctx.drawImage(Clock, 250, 0, 100, 100)};
      ctx.font = "30px Arial"; 
      if (Level == 1) {ctx.fillStyle = "black"; level = "1 - Farm"}; 
      if (Level == 2) {ctx.fillStyle = "white"; level = "2 - Sewer"};
      if (Level == 3) {ctx.fillStyle = "turquoise"; level = "3 - Desert"};
      if (Level == 4) {ctx.fillStyle = "blue"; level = "2 - Sea"};
      if (Level == 5) {ctx.fillStyle = "orange"; level = "3 - Beach"};
      if (Level == 6) {ctx.fillStyle = "pink"; level = "3 - Off-Grid"};
      if (Level == 7) {ctx.fillStyle = "lightgrey"; level = "4 - Taiga"};

      if (Level != 4) {ctx.fillText("X " + Player.Stamina, 100, 50)} else {ctx.fillStyle = Hex4;
        if (Player.x < Map[2][1].x || Player.jump) 
        {Distance = String(Math.round(Player.x - Map[8][0].x))};
                                                   ;
        ctx.fillText(Distance, 450, 100); ctx.fillStyle = "blue"          }; 
      ctx.fillText("X " + Player.Lives, 500, 50);
      ctx.fillText("Level: " + level, 750, 50);
    
      // Expressing the player's shock of the prospect of being captured
      if (Player.Surprised) {ctx.fillText("!", Player.x + 0.5*Player.width, Player.y - 30)}
    
      if (Text.length > 0) {ctx.drawImage(SpeechBox[0], 0, 75, 1024, 150);
                        ctx.drawImage(SpeechBox[1], 20, 95, 129, 113) };
      ctx.fillStyle = "white"; 
      if (Text.length == 1) {ctx.fillText(Text[0], 180, 160)};
      if (Text.length == 2) {ctx.fillText(Text[0], 180, 135); ctx.fillText(Text[1], 180, 185)};
      if (Text.length == 3) {ctx.fillText(Text[0], 180, 125); ctx.fillText(Text[1], 180, 160);
                           ctx.fillText(Text[2], 180, 195)                                  };

      if (Level == 3) {ctx.fillStyle = "black";
        if (T[0] == 0 && T[1] <= 10) {ctx.fillStyle = "red"};
        if (T[1] >= 10) {ctx.fillText(T[0] + ":" + T[1], 270, 67)}
        else {ctx.fillText(T[0] + ":0" + T[1], 270, 67)}};
                                     };
    
    if (keys.pause) {RenderPause()}; Scene()
                  };

  canvas = document.getElementById("canvas");
  ctx = canvas.getContext("2d"); ctx.canvas.height = 576; ctx.canvas.width = 1024;
    
  // Adding the event listeners
  document.addEventListener("keydown",keydown); document.addEventListener("keyup",keyup);
  setInterval(loop,22);                            

  // Disabling keyboard scrolling, for obvious reasons
  window.addEventListener("keydown", function(e) {
    if(["Space","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].indexOf(e.code) > -1) {
        e.preventDefault();                                                           }
                                                 }, false);

 </script>
</html>
